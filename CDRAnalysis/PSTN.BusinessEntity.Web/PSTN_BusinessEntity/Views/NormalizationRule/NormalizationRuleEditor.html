<div vr-modalcontent ng-controller="PSTN_BusinessEntity_NormalizationRuleEditorController" vr-loader="isGettingData" width="'25%'">
    <vr-modalbody>
        <vr-form name="formNormalizationRuleEditor">

            <vr-row>
                <vr-columns width="fullrow">
                    <vr-section title="Criteria">

                        <vr-columns width="1/2row">
                            <vr-select label="Switch"
                                       datasource="switches"
                                       selectedvalues="selectedSwitches"
                                       datavaluefield="ID"
                                       datatextfield="Name"
                                       entityname="Switch"
                                       ismultipleselection>
                            </vr-select>
                        </vr-columns>

                        <vr-columns width="1/2row">
                            <vr-select label="Trunk"
                                       datasource="trunks"
                                       selectedvalues="selectedTrunks"
                                       datavaluefield="ID"
                                       datatextfield="Name"
                                       entityname="Trunk"
                                       ismultipleselection>
                            </vr-select>
                        </vr-columns>

                        <vr-columns width="1/2row">
                            <vr-select label="Number Type"
                                       datasource="phoneNumberTypes"
                                       selectedvalues="selectedPhoneNumberType"
                                       datavaluefield="value"
                                       datatextfield="description"
                                       entityname="Number Type">
                            </vr-select>
                        </vr-columns>

                        <vr-columns width="1/2row">
                            <vr-textbox label="Number Length" value="phoneNumberLength"></vr-textbox>
                        </vr-columns>

                        <vr-columns width="1/2row">
                            <vr-textbox label="Number Prefix" value="phoneNumberPrefix"></vr-textbox>
                        </vr-columns>

                    </vr-section>
                </vr-columns>
            </vr-row>

            <vr-row>
                <vr-columns width="fullrow">
                    <vr-section title="Actions">

                        <vr-row>
                            <vr-columns width="1/2row">
                                <vr-select label="Behavior"
                                           datasource="normalizationRuleActionSettingsTemplates"
                                           selectedvalues="selectedNormalizationRuleActionSettingsTemplate"
                                           onselectionchanged="onNormalizationRuleActionSettingsTemplateChanged"
                                           datavaluefield="TemplateConfigID"
                                           datatextfield="Name"
                                           entityname="Behavior"
                                           hideremoveicon>
                                </vr-select>
                            </vr-columns>

                            <vr-columns width="1/2row">
                                <div style="top:25px;position:absolute;" vr-disabled="isAddButtonDisabled">
                                    <vr-button type="Add" data-onclick="addNormalizationRuleActionSettingsObjToList" standalone></vr-button>
                                </div>
                            </vr-columns>
                        </vr-row>

                        <vr-row>
                            <vr-columns width="fullrow">
                                <vr-directivewrapper directive="selectedNormalizationRuleActionSettingsTemplate.Editor"
                                                     behaviorid="selectedNormalizationRuleActionSettingsTemplate.TemplateConfigID"
                                                     onloaded="onNormalizationRuleActionSettingsDirectiveLoaded">
                                </vr-directivewrapper>
                            </vr-columns>
                        </vr-row>

                        <vr-row>
                            <vr-columns width="fullrow">

                                <ul class="list-group dragbelzone" ng-sortable="itemsSortable" ng-show="normalizationRuleActionSettingsList.length > 0">
                                    <li ng-repeat="normalizationRuleActionSettingsObj in normalizationRuleActionSettingsList" class="list-group-item list-custom" style="margin:1px;">
                                        <i class="glyphicon glyphicon-th-list handeldrag"></i>
                                        <div style="display:inline-block;" vr-disabled="true">
                                            <vr-directivewrapper directive="normalizationRuleActionSettingsObj.Editor"
                                                                 behaviorid="normalizationRuleActionSettingsObj.BehaviorId"
                                                                 onloaded="onListItemDirectiveLoaded">
                                            </vr-directivewrapper>
                                        </div>
                                        <i class="glyphicon glyphicon-remove hand-cursor" style="float:right;padding:5px;cursor:default" ng-click="removeNormalizationRuleActionSettingsObjFromList($event, normalizationRuleActionSettingsObj)"></i>
                                    </li>
                                </ul>

                            </vr-columns>
                        </vr-row>

                    </vr-section>
                </vr-columns>
            </vr-row>

        </vr-form>
    </vr-modalbody>

    <div>
        <vr-actionbar showcollapsebutton="false" issectioncollapsed="false">
            <div transclude-to="buttons">
                <vr-button type="Save" formname="formNormalizationRuleEditor" data-onclick="saveNormalizationRule"></vr-button>
                <vr-button type="Close" data-onclick="close"></vr-button>
            </div>
        </vr-actionbar>
    </div>
</div>
