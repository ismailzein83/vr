<div vr-modalcontent draggable ng-controller="FraudAnalysis_SuspiciousNumberDetailsController" width="'95%'">
    <vr-modalbody vr-loader="isInitializing" maxheight="'800px'">

        <vr-form name="formSuspiciousNumberDetails">

            <vr-row>
                <vr-columns width="normal">
                    <vr-textbox label="Account Number" value="accountNumber" readonly></vr-textbox>
                </vr-columns>

                <vr-columns width="normal">
                    <vr-textbox label="Account Status" value="accountStatus" readonly></vr-textbox>
                </vr-columns>
            </vr-row>

            <vr-choices selectedindex="selectedTabIndex" onselectionchanged="onSelectedTabChanged()">
                <vr-choice isselected="occurancesSelected">Current Occurrences</vr-choice>
                <vr-choice isselected="normalCDRsSelected">CDRs</vr-choice>
                <vr-choice isselected="numberProfilesSelected">Number Profiles</vr-choice>
                <vr-choice isselected="caseHistorySelected">Case History</vr-choice>
                <vr-choice isselected="relatedNumbersSelected">Related Numbers</vr-choice>
            </vr-choices>

            <div ng-show="occurancesSelected">
                <vr-row>
                    <vr-columns width="fullrow" ng-show="showOccurancesGrid">
                        <vr-datagrid datasource="occurances"
                                     on-ready="onGridReady_Occurances"
                                     dataretrievalfunction="dataRetrievalFunction_Occurances"
                                     pagingtype="'PagingOnScroll'"
                                     maxheight="500px"
                                     idfield="DetialID">

                            <vr-datagridcolumn headertext="'Suspicion Level'" field="'SuspicionLevelDescription'" type="'Text'"></vr-datagridcolumn>
                            <vr-datagridcolumn headertext="'Strategy'" field="'StrategyName'" type="'Text'"></vr-datagridcolumn>
                            <vr-datagridcolumn headertext="'From Time'" field="'FromDate'" type="'Datetime'"></vr-datagridcolumn>
                            <vr-datagridcolumn headertext="'To Time'" field="'ToDate'" type="'Datetime'"></vr-datagridcolumn>
                            <vr-datagridcolumn headertext="'Execution Time'" field="'ExecutionDate'" type="'Datetime'"></vr-datagridcolumn>
                        </vr-datagrid>
                    </vr-columns>
                </vr-row>
                <vr-row>
                    <vr-columns width="fullrow">
                        {{ message }}
                    </vr-columns>
                </vr-row>
            </div>

            <div ng-show="normalCDRsSelected">
                <vr-row>
                    <vr-columns width="normal">
                        <vr-datetimepicker label="From" value="fromDate_NormalCDRs" type="dateTime" onvaluechanged="filterData" isrequired></vr-datetimepicker>
                    </vr-columns>

                    <vr-columns width="normal">
                        <vr-datetimepicker label="To" value="toDate_NormalCDRs" type="dateTime" onvaluechanged="filterData" isrequired></vr-datetimepicker>
                    </vr-columns>
                </vr-row>
                <vr-row>
                    <vr-columns width="fullrow" simplecol>
                        <vr-datagrid datasource="normalCDRs"
                                     on-ready="onGridReady_NormalCDRs"
                                     dataretrievalfunction="dataRetrievalFunction_NormalCDRs"
                                     pagingtype="'PagingOnScroll'"
                                     maxheight="500px"
                                     idfield="Id">

                            <vr-datagridcolumn headertext="'IMSI'" field="'IMSI'" type="'Text'"></vr-datagridcolumn>
                            <vr-datagridcolumn headertext="'Connect Time'" field="'ConnectDateTime'" type="'Datetime'"></vr-datagridcolumn>
                            <vr-datagridcolumn headertext="'Destination'" field="'Destination'" type="'Text'"></vr-datagridcolumn>
                            <vr-datagridcolumn headertext="'Duration (Secs)'" field="'DurationInSeconds'" type="'Number'"></vr-datagridcolumn>
                            <vr-datagridcolumn headertext="'Call Class'" field="'Call_Class'" type="'Text'"></vr-datagridcolumn>
                            <vr-datagridcolumn headertext="'Call Type'" field="'CallTypeDescription'" type="'Text'"></vr-datagridcolumn>
                            <vr-datagridcolumn headertext="'SubType'" field="'SubType'" type="'Text'"></vr-datagridcolumn>
                            <vr-datagridcolumn headertext="'IMEI'" field="'IMEI'" type="'Text'"></vr-datagridcolumn>
                            <vr-datagridcolumn headertext="'Cell ID'" field="'CellId'" type="'Text'"></vr-datagridcolumn>
                            <vr-datagridcolumn headertext="'Up Volume'" field="'UpVolume'" type="'Text'"></vr-datagridcolumn>
                            <vr-datagridcolumn headertext="'Down Volume'" field="'DownVolume'" type="'Text'"></vr-datagridcolumn>
                            <vr-datagridcolumn headertext="'Service Type'" field="'ServiceType'" type="'Text'"></vr-datagridcolumn>
                            <vr-datagridcolumn headertext="'Service VAS Name'" field="'ServiceVASName'" type="'Text'"></vr-datagridcolumn>
                        </vr-datagrid>
                    </vr-columns>
                </vr-row>
            </div>

            <div ng-show="numberProfilesSelected">
                <vr-row>
                    <vr-columns width="normal" ng-show="showProfileOptions">
                        <vr-select label="Profile Source"
                                   datasource="profileSources"
                                   selectedvalues="selectedProfileSource"
                                   datavaluefield="value"
                                   datatextfield="description"
                                   onselectionchanged="onProfileSourceChanged"
                                   hideremoveicon>
                        </vr-select>
                    </vr-columns>

                    <vr-columns width="normal">
                        <vr-datetimepicker label="From"
                                           value="fromDate_NumberProfiles"
                                           type="dateTime"
                                           onvaluechanged="filterData"
                                           isrequired
                                           ng-show="showDate">
                        </vr-datetimepicker>
                    </vr-columns>

                    <vr-columns width="normal">
                        <vr-datetimepicker label="To"
                                           value="toDate_NumberProfiles"
                                           type="dateTime"
                                           onvaluechanged="filterData"
                                           isrequired
                                           ng-show="showDate">
                        </vr-datetimepicker>
                    </vr-columns>
                </vr-row>
                <vr-row>
                    <vr-columns width="fullrow">
                        <div class="big-data-grid" ng-hide="showDate">
                            <div class="container">
                                <vr-datagrid datasource="detailAggregateValues"
                                             maxheight="500px">

                                    <vr-datagridcolumn ng-repeat="agg in aggregateDefinitions"
                                                       headertext="agg.name"
                                                       field="'AggregateValues[&quot;' + agg.name + '&quot;]'"
                                                       type="'Number'">
                                    </vr-datagridcolumn>
                                </vr-datagrid>
                            </div>
                        </div>

                        <div class="big-data-grid" ng-show="showDate">
                            <div class="container">
                                <vr-datagrid datasource="numberProfile"
                                             on-ready="onGridReady_NumberProfiles"
                                             dataretrievalfunction="dataRetrievalFunction_NumberProfiles"
                                             pagingtype="'PagingOnScroll'"
                                             maxheight="500px">

                                    <vr-datagridcolumn headertext="'From Time'" field="'FromDate'" type="'Datetime'"></vr-datagridcolumn>
                                    <vr-datagridcolumn headertext="'To Time'" field="'ToDate'" type="'Datetime'"></vr-datagridcolumn>

                                    <vr-datagridcolumn ng-repeat="agg in aggregateDefinitions"
                                                       headertext="agg.name"
                                                       field="'AggregateValues[&quot;' + agg.name + '&quot;]'"
                                                       type="'Number'">
                                    </vr-datagridcolumn>
                                </vr-datagrid>
                            </div>
                        </div>
                    </vr-columns>
                </vr-row>
            </div>

            <div ng-show="caseHistorySelected">
                <vr-row>
                    <vr-columns width="fullrow">
                        <vr-datagrid datasource="cases"
                                     on-ready="onGridReady_CaseHistory"
                                     dataretrievalfunction="dataRetrievalFunction_CaseHistory"
                                     pagingtype="'PagingOnScroll'"
                                     maxheight="500px"
                                     idfield="CaseID">

                            <vr-datagridcolumn headertext="'Case ID'" field="'CaseID'" type="'Text'"></vr-datagridcolumn>
                            <vr-datagridcolumn headertext="'Status'" field="'CaseStatusDescription'" type="'Text'"></vr-datagridcolumn>
                            <vr-datagridcolumn headertext="'Analyst'" field="'UserName'" type="'Text'"></vr-datagridcolumn>
                            <vr-datagridcolumn headertext="'Create Time'" field="'CreatedTime'" type="'Datetime'"></vr-datagridcolumn>
                            <vr-datagridcolumn headertext="'Status Update Time'" field="'StatusUpdatedTime'" type="'Datetime'"></vr-datagridcolumn>
                            <vr-datagridcolumn headertext="'Valid Till'" field="'ValidTill'" type="'Datetime'"></vr-datagridcolumn>

                            <vr-datagridexpandablerow>
                                <div ng-include="'/Client/Modules/FraudAnalysis/Views/SuspiciousAnalysis/Includes/CaseOccuranceGrid.html'"></div>
                            </vr-datagridexpandablerow>
                        </vr-datagrid>
                    </vr-columns>
                </vr-row>
            </div>

            <div ng-show="relatedNumbersSelected">
                <vr-row>
                    <vr-columns width="normal">
                        <vr-select label="Reason"
                                   datasource="reasons"
                                   selectedvalues="selectedReason"
                                   datavaluefield="value"
                                   datatextfield="description"
                                   onselectionchanged="onReasonChanged"
                                   hideremoveicon>
                        </vr-select>
                    </vr-columns>
                </vr-row>
                <vr-row>
                    <vr-columns width="fullrow" simplecol>
                        <vr-datagrid datasource="relatedNumbers"
                                     data-on-ready="onGridReady_RelatedNumbers"
                                     maxheight="300px">

                            <vr-datagridcolumn headertext="'Related Number'" field="'RelatedNumber'" type="'Text'" isclickable="true" onclicked="relatedNumberClicked"></vr-datagridcolumn>
                        </vr-datagrid>
                    </vr-columns>
                </vr-row>
            </div>

            <vr-row>
                <vr-columns width="fullrow" ng-show="showCaseStatuses">
                    <vr-section title="Update Case">
                        <vr-columns width="normal">
                            <vr-select label="Status"
                                       datasource="caseStatuses"
                                       selectedvalues="selectedCaseStatus"
                                       datavaluefield="value"
                                       datatextfield="description"
                                       onselectionchanged="toggleValidTill"
                                       isrequired>
                            </vr-select>
                        </vr-columns>
                        <vr-columns width="normal">
                            <vr-datetimepicker label="Valid Till"
                                               value="validTill"
                                               type="dateTime"
                                               ng-show="whiteListSelected">
                            </vr-datetimepicker>
                        </vr-columns>
                    </vr-section>
                </vr-columns>
            </vr-row>

        </vr-form>
    </vr-modalbody>
    <div>
        <vr-actionbar showcollapsebutton="false" issectioncollapsed="false">
            <div transclude-to="buttons">
                <vr-button type="Save" formname="formSuspiciousNumberDetails" data-onclick="updateAccountCase"></vr-button>
                <vr-button type="Close" data-onclick="close"></vr-button>
            </div>
        </vr-actionbar>
    </div>
</div>
