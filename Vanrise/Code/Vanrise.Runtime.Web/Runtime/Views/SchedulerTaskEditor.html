<div vr-modalcontent ng-controller="Runtime_NewSchedulerTaskEditorController" vr-loader="isLoading">
    <vr-modalbody width="'50%'" maxheight="'500px'">
        <vr-form name="formSchedulerTaskEditor">
            <vr-tabs>
                <vr-tab header="'Task Definition'">
                    <vr-row>
                        <vr-columns width="fullrow">
                            <vr-row>
                                <vr-columns width="1/2row">
                                    <vr-textbox value="scopeModel.name" label="Name" isrequired></vr-textbox>
                                </vr-columns>
                                <vr-columns width="1/2row">
                                    <vr-switch value="scopeModel.isEnabled" label="Enabled"></vr-switch>
                                </vr-columns>
                            </vr-row>
                            <vr-row>
                                <vr-columns width="1/2row">
                                    <vr-datetimepicker value="scopeModel.startEffDate" label="Start Effective Date" isrequired customvalidate="scopeModel.validateDates()"></vr-datetimepicker>
                                </vr-columns>
                                <vr-columns width="1/2row">
                                    <vr-datetimepicker value="scopeModel.endEffDate" label="End Effective Date" customvalidate="scopeModel.validateDates()"></vr-datetimepicker>
                                </vr-columns>
                            </vr-row>
                        </vr-columns>
                    </vr-row>
                </vr-tab>
                <vr-tab header="'Trigger'">
                    <vr-row>
                        <vr-columns width="fullrow">
                            <vr-row>
                                <vr-columns width="1/2row">
                                    <vr-select label="Type" datatextfield="Name" datavaluefield="TriggerTypeId"
                                               datasource="triggerTypes" selectedvalues="scopeModel.selectedTriggerType" isrequired></vr-select>
                                </vr-columns>
                            </vr-row>
                            <vr-row vr-loader="isLoadingTrigger">
                                <vr-columns width="fullrow" ng-if="scopeModel.selectedTriggerType">
                                    <vr-section title="{{scopeModel.selectedTriggerType.Name}} Trigger">
                                        <vr-directivewrapper directive="scopeModel.selectedTriggerType.Info.Editor" on-ready="onTaskTriggerDirectiveReady"></vr-directivewrapper>
                                    </vr-section>
                                </vr-columns>
                            </vr-row>
                        </vr-columns>
                    </vr-row>
                </vr-tab>
                <vr-tab header="'Action'">
                    <vr-row>
                        <vr-columns width="fullrow">
                            <vr-row>
                                <vr-columns width="1/2row">                                   
                                    <span vr-disabled="scopeModel.disableActionType">
                                        <vr-runtime-taskactiontype-selector on-ready="scopeModel.onTaskActionTypeDirectiveReady" selectedvalues="scopeModel.selectedActionType" onselectionchanged="onTaskActionSelectionChanged" isrequired>
                                        </vr-runtime-taskactiontype-selector>
                                    </span>                                   
                                </vr-columns>
                            </vr-row>
                            <vr-row vr-loader="isLoadingAction">
                                <vr-columns width="fullrow" ng-if="scopeModel.selectedActionType">
                                    <vr-section header="{{scopeModel.selectedActionType.Name}} Action">
                                        <vr-directivewrapper directive="scopeModel.selectedActionType.Info.Editor" on-ready="onTaskActionDirectiveReady"></vr-directivewrapper>
                                    </vr-section>
                            </vr-row>
                        </vr-columns>
                    </vr-row>
                </vr-tab>
            </vr-tabs>
            <vr-row>
                <vr-columns width="fullrow" ng-if="scopeModel.validationErrorMessage != undefined">
                    <label class="alert alert-danger" vr-alert>{{scopeModel.validationErrorMessage}}</label>
                </vr-columns>
            </vr-row>
        </vr-form>
    </vr-modalbody>
    <div>
        <vr-actionbar showcollapsebutton="false" issectioncollapsed="false">
            <div transclude-to="buttons">
                <vr-button type="Save" formname="formSchedulerTaskEditor" data-onclick="SaveTask" ></vr-button>
                <vr-button type="Close" data-onclick="close"></vr-button>
            </div>
        </vr-actionbar>

    </div>
</div>
