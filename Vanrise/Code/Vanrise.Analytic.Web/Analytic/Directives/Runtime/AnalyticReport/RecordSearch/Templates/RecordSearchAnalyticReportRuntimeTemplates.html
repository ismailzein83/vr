<vr-form validationcontext="formFilter">
    <div ng-hide="filterSectionCollapsed" vr-loader="isLoading">
        <vr-row removeline>
            <vr-columns width="fullrow">
                <vr-choices-filter selectedindex="selectedFilternIndex">
                    <vr-choice-filter isselected="basicSelected">Basic</vr-choice-filter>
                    <vr-choice-filter isselected="advancedSelected">Advanced</vr-choice-filter>
                </vr-choices-filter>
            </vr-columns>
        </vr-row>

        <vr-row removeline>
            <vr-columns width="normal" ng-show="showSourceSelector">
                <vr-select datasource="drSearchPageStorageSources" selectedvalues="selectedDRSearchPageStorageSource" onselectionchanged="onDRSearchPageStorageSourceChanged"
                           datavaluefield="Name" datatextfield="Title" isrequired="true" label="Source" hideremoveicon>
                </vr-select>
            </vr-columns>

            <vr-columns colnum="6" haschildcolumns>
                <vr-timerange on-ready="onTimeRangeDirectiveReady " width="1/3row" type="longDateTime" from="fromDate" to="toDate" period="selectedPeriod" isrequired="false"></vr-timerange>
            </vr-columns>

            <vr-columns width="normal">
                <vr-textbox label="Limit Result To" value="limit" type="number" decimalprecision="0" minvalue="0" customvalidate="checkMaxNumberResords()" isrequired="true"></vr-textbox>
            </vr-columns>

            <vr-columns width="normal">
                <vr-select label="Order Direction" datasource="orderDirectionList" selectedvalues="selectedOrderDirection"
                           datavaluefield="value" datatextfield="description" isrequired="true" hideremoveicon>
                </vr-select>
            </vr-columns>
            <span ng-repeat="filter in filters">
                <vr-directivewrapper directive="filter.directiveEditor" on-ready="filter.onDirectiveReady" normal-col-num="2" isrequired="filter.isRequired"></vr-directivewrapper>
            </span>
        </vr-row>
        <vr-row removeline ng-if="advancedSelected">
            <vr-columns width="fullrow" vr-loader="isloadingFilter">
                <vr-section title="Advanced Filter">
                    <vr-row ng-show="expression !=undefined" removeline>
                        <vr-columns width="fullrow"><vr-label isvalue breakline>{{expression}}</vr-label></vr-columns>
                    </vr-row>
                    <vr-row removeline>
                        <vr-columns width="1/4row" class="pull-right">
                            <button type="button" class="btn btn-xs btn-primary" ng-click="addFilter()" ng-disabled="!selectedDRSearchPageStorageSource">
                                <i class="glyphicon glyphicon-pencil"></i> Edit Filter
                            </button>
                        </vr-columns>

                        <vr-columns width="1/4row" class="pull-right">
                            <button type="button" class="btn btn-xs btn-primary" ng-click="resetFilter()" ng-disabled="expression ==undefined">
                                <i class="glyphicon glyphicon-remove"></i> Reset Filter
                            </button>
                        </vr-columns>
                    </vr-row>
                </vr-section>
            </vr-columns>
        </vr-row>
    </div>
    <vr-row removeline>
        <vr-actionbar showcollapsebutton="true" issectioncollapsed="filterSectionCollapsed">
            <div transclude-to="buttons">
                <vr-button type="Search" data-onclick="search" validationcontext="formFilter"></vr-button>
            </div>
        </vr-actionbar>
    </vr-row>
</vr-form>
<div>
    <vr-row>
        <vr-columns width="fullrow" simplecol>
            <vr-analytic-analyticreport-datarecordstoragelog-grid on-ready="onGridReady"></vr-analytic-analyticreport-datarecordstoragelog-grid>
        </vr-columns>
    </vr-row>
</div>
