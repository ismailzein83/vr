<vr-form validationcontext="formFilter">
    <div ng-hide="filterSectionCollapsed" vr-loader="isLoading">

        <vr-row removeline>
            <vr-columns width="fullrow">
                <vr-choices-filter selectedindex="selectedFilternIndex">
                    <vr-choice-filter isselected="basicSelected">Basic</vr-choice-filter>
                    <vr-choice-filter isselected="advancedSelected">Advanced</vr-choice-filter>
                </vr-choices-filter>
            </vr-columns>
        </vr-row>
        <vr-row removeline>
            <!--<span ng-repeat="filter in scopeModel.filters">
                <vr-directivewrapper directive="filter.directiveEditor" on-ready="filter.onDirectiveReady" normal-col-num="2" isrequired="filter.isRequired"></vr-directivewrapper>
            </span>-->

            <vr-columns colnum="1">
                <vr-select datatextfield="description" datavaluefield="value" label="Since"
                           entityname="Since" selectedvalues="scopeModel.selectedSinceTime" datasource="scopeModel.sinceTimes" onselectionchanged="scopeModel.onSinceSelectionChanged" hideremoveicon></vr-select>
            </vr-columns>

            <vr-columns colnum="2" ng-show="scopeModel.showSinceTime" withemptyline>
                <vr-datetimepicker type="dateTime" value="scopeModel.fromdate" isrequired="scopeModel.showSinceTime" customvalidate="validateDateTime()"></vr-datetimepicker>
            </vr-columns>


            <vr-columns colnum="2" ng-show="scopeModel.showSinceLast" withemptyline>
                <span style="display:flex">
                    <span style ="display:inline-block;width:50%;padding-right:2px">
                        <vr-textbox value="scopeModel.last" isrequired="scopeModel.showSinceLast" type="number" minvalue="1"></vr-textbox>
                    </span>
                    <span style="display:inline-block;width:50%;">
                        <vr-select datatextfield="description" datavaluefield="value"
                                   entityname="Unit" selectedvalues="scopeModel.selectedTimeUnit" datasource="scopeModel.timeUnits" hideremoveicon></vr-select>
                    </span>
                </span>
                
               
            </vr-columns>
            <vr-columns colnum="2">
                <vr-select datatextfield="description" datavaluefield="value" label="Grouping Interval"
                           entityname="Grouping Unit" selectedvalues="scopeModel.selectedTimeGroupingUnit" datasource="scopeModel.timeGroupingUnits" hideremoveicon></vr-select>
            </vr-columns>
            <vr-columns colnum="2">
                <vr-textbox label="Refresh (Min)" value="scopeModel.timeInterval" type="number" isrequired="true" minvalue="1"></vr-textbox>
            </vr-columns>
        </vr-row>
        <vr-row removeline ng-if="advancedSelected">
            <vr-columns width="fullrow">
                <vr-section title="Advanced Filter">
                    <vr-row ng-show="scopeModel.expression !=undefined" removeline>
                        <vr-columns width="fullrow"><vr-label isvalue breakline>{{scopeModel.expression}}</vr-label></vr-columns>
                    </vr-row>
                    <vr-row removeline>
                        <vr-columns width="1/4row" class="pull-right">
                            <button type="button" class="btn btn-xs btn-primary" ng-click="scopeModel.addFilter()">
                                <i class="glyphicon glyphicon-pencil"></i> Edit Filter
                            </button>
                        </vr-columns>

                        <vr-columns width="1/4row" class="pull-right">
                            <button type="button" class="btn btn-xs btn-primary" ng-click="scopeModel.resetFilter()" ng-disabled="scopeModel.expression ==undefined">
                                <i class="glyphicon glyphicon-remove"></i> Reset Filter
                            </button>
                        </vr-columns>
                    </vr-row>
                </vr-section>
            </vr-columns>
        </vr-row>


    </div>
    <vr-row removeline>
        <vr-actionbar showcollapsebutton="true" issectioncollapsed="filterSectionCollapsed">
            <div transclude-to="buttons">
                <vr-button type="Search" validationcontext="formFilter" data-onclick="scopeModel.search"></vr-button>
            </div>
        </vr-actionbar>
    </vr-row>
</vr-form>
<div>
    <vr-row>
        <vr-columns ng-repeat="widget in scopeModel.widgets" colnum="{{widget.columnWidth.numberOfColumns}}">
            <vr-section title="{{widget.settings.WidgetTitle}}" ng-if="widget.settings.ShowTitle" vr-loader="scopeModel.isLoadingDimensionDirective">
                <vr-directivewrapper directive="widget.runtimeEditor" on-ready="widget.onDirectiveReady"></vr-directivewrapper>
            </vr-section>
            <span style="padding-right: 3px;" ng-if="!widget.settings.ShowTitle" vr-loader="scopeModel.isLoadingDimensionDirective">
                <vr-directivewrapper directive="widget.runtimeEditor" on-ready="widget.onDirectiveReady"></vr-directivewrapper>
            </span>
        </vr-columns>
    </vr-row>
</div>
