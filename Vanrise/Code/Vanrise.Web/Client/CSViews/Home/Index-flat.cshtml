@using Vanrise.Web.Base
<!DOCTYPE html>
<html ng-app="mainModule" ng-controller="mainCtrl" ng-init="setCookieName('@ViewBag.CookieName');setLoginURL('@ViewBag.LoginURL'); spinner=true;setVersionNumber('@ViewBag.version');setLocalizationEnabled(@ViewBag.IsLocalizationEnabled);setLocalizationRTL(@ViewBag.IsRTL);">
<head>
    <meta charset="utf-8" />
    <link rel="shortcut icon" href="/images/iconheader.ico" type="image/ico" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title ng-bind="getPageName()"></title>
    <script ng-if="'@ViewBag.isEnabledGA'">
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    </script>
    @VRWebStyles.Render("~/Content/bootstrap")
    @VRWebStyles.Render("~/Content/AngularExtensions")
    @VRWebStyles.Render("~/Content/HandsonTable")
    @VRWebStyles.Render("~/Content/CodeMirrorStyle")
    @*Styles.Render("~/Content/Semantic")*@
    @VRWebStyles.Render("~/Content/FontStyle")
    @VRWebStyles.Render("~/Content/Styles")
    @VRWebStyles.Render("~/Content/Themes")
</head>
<body @ViewBag.RTLClass ng-class="isMobile?'flat vr-mobile-view':'flat'" ng-init="isLocalizationEnabled = @ViewBag.IsLocalizationEnabled ; hasRemoteApplications = @ViewBag.HasRemoteApplications; hasCentralApplication = @ViewBag.HasCentralApplication;">
    <div ng-show="spinner" class="loading-container"><img src="Client/Images/loader-mask.gif" /></div>
    <div ng-show="!spinner" ng-cloak id="mainBodyContainer" style="display:none">

        <div class="normal-view" ng-if="::!isMobile">
            <nav class="navbar navbar-inverse navbar-fixed-top vr-nav-custom">

                <div class="navbar-header">

                    <div class="vr-sidebar-header">
                        <div class="toggel-icon-container">
                            <span class="hand-cursor glyphicon glyphicon-menu-hamburger toggel-icon" ng-click="toogled == true ? $root.hideToogled() : $root.showToogled()  " ng-if="pinned==true" ng-hide="$root.hideToogleIcon"></span>
                        </div>
                        <div class="logo-container">
                            <img src="/images/logoonheader.png" class="hand-cursor index-logo" ng-click="$root.goToHomePage()" title="Home" />
                        </div>
                    </div>

                    <div class="vr-page-header">
                        <div class="page-header-wrapper">
                            <div class="header-item info-container">
                                <div class="company-name-container">
                                    <span title="@ViewBag.CompanyName" class="vr-company-name">@ViewBag.CompanyName</span>
                                </div>
                                <label class="vr-user-separator" ng-show="currentPage.Title">|</label>
                                <span class="vr-page-title">{{currentPage.Title}}</span>
                            </div>
                            <div class="header-item action-container">
                                <div class="vr-user-menu-wrapper">
                                    <div class="dropdown vr-user-menu" ng-mouseenter="showMenu($event)" ng-mouseleave="hideMenu($event)">
                                        <div class="dropdown-toggle flex-user-menu" id="dropdownMenuCu-test" aria-expanded="true" data-toggle="dropdown">
                                            <div class="vr-user-icon">
                                                <vr-preview-image value="userPhotoFileId" usericon="userPhotoFileId!=null"> </vr-preview-image>
                                            </div>
                                            <label class="vr-user-label">{{userDisplayName}}</label>
                                        </div>
                                        <ul class="dropdown-menu " role="menu" aria-labelledby="dropdownMenuCu-test">
                                            <li role="presentation">
                                                <a href="" ng-click="openEditProfileModal()">Edit My Profile</a>
                                            </li>
                                            <li role="presentation" ng-if="@ViewBag.IsLocalizationEnabled">
                                                <a href="" ng-click="openEditMyLanguageModal()">Edit My Language</a>
                                            </li>
                                            <li role="presentation" ng-if="supportPasswordManagement">
                                                <a href="" ng-click="openResetPasswordModal()">Change My Password</a>
                                            </li>
                                            <li role="presentation" ng-if="@ViewBag.HasRemoteApplications">
                                                <a href="" ng-click="openRemoteApplicationsModal()">Switch Application</a>
                                            </li>
                                            <li role="presentation" ng-if="@ViewBag.HasCentralApplication">
                                                <a href="" ng-click="redirectToCentralApplication()">Back To Products</a>
                                            </li>
                                            <li role="presentation">
                                                <a href="" ng-click="logout()">Logout</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <label class="vr-user-separator">|</label>
                                <div class="header-action-item vr-support-item">
                                    <a href="" ng-click="openSupportModal()">
                                        <img src="Client/images/support.png" />
                                    </a>
                                </div>
                                <div class="header-action-item vr-notfication-item" title="Alert(s)">
                                    <img src="Client/images/02.png" />
                                    <span class="badge bg-flat">0</span>
                                </div>
                                <div class="header-action-item vr-notfication-item" title="Notification(s)">
                                    <img src="Client/images/01.png" />
                                    <span class="badge bg-flat">0</span>
                                </div>
                                <div class="vr-dateclock-item">
                                    <div class="vr-date-container" ng-bind="$root.clock  | date:'EEE dd MMM , yyyy'"></div>
                                    <div class="vr-clock-container">
                                        <div class="vr-clock-item" ng-bind="$root.clock  | date:'HH:mm:ss'"> </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>

            <div id="wrapper" ng-class="toogled==true?'wrapper-toogled':'wrapper-normal'">
                <!-- Sidebar -->
                <div id="sidebar-wrapper" ng-style="toogled==true?{'width':'200px'}:{'width':'0px'}" style="overflow-x:hidden">

                    <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true" ng-if="toogled==true" ng-mouseout="mouseout()" ng-mouseover="mouseover()">

                        <div style="overflow-x:hidden;position:absolute;width:200px;height:calc(100% - 115px);">
                            <div class="panel panel-default  menu-item-list" ng-show="$root.selectedMenu && $root.moduleFilter">
                                <div class="panel-heading panel-heading-vr hand-cursor boxes float-box waves-effect  waves-block dll-menu-theme" ng-click="$root.goToHomePage()">
                                    <span>
                                        <span class="glyphicon module-icon"><span class="icon glyphicon glyphicon-home" style="font-size: 17px;color:#fff;"></span></span>
                                        <span class="vr-module-name">Home</span>
                                    </span>
                                </div>
                            </div>
                            <div class="panel panel-default menu-item-list" ng-repeat="item in $root.menuItems | filter: $root.menuFilter">
                                <div ng-class="item.isSelected? 'selected-menu':''" class="panel-heading panel-heading-vr hand-cursor   boxes float-box waves-effect  waves-block dll-menu-theme" ng-click="setIndex(item)">

                                    <span ng-if="item.Childs.length > 0">
                                        <span class="glyphicon module-icon"><img class="icon" ng-src="{{::item.Icon}}" /></span>
                                        <span class="vr-module-name" title="{{::item.Name}}">{{::item.Name}}</span>
                                        <span class=" hand-cursor  toggel">
                                            <span ng-if="item.Childs.length>0" class="glyphicon chevron-direction" ng-class="menuItemsCurrent.Id == item.Id ?'glyphicon-chevron-down':'glyphicon-chevron-right'"></span>
                                        </span>
                                    </span>

                                    <ul class="nav" ng-if="item.Childs.length == 0" data-toggle="collapse" data-parent="#accordion">
                                        <li class="dll-menu menu-item-list-ligth" ng-repeat="c in item.Childs">
                                            <a class="menulink  " ng-href="{{::item.Location}}" ng-click="logfunc()">{{::item.Name}}</a>
                                        </li>
                                    </ul>
                                </div>
                                <div id="collapse-{{::item.Id}}" ng-if="menuItemsCurrent.Id == item.Id " class="slideanimation">
                                    <div class="panel-body">
                                        <div ng-repeat="c in item.Childs">
                                            <ul class="nav">
                                                <li ng-if="c.Childs == null " class="waves-effect waves-classic dll-menu menu-item-list-ligth " ng-class="c.isSelected?'selected-node':''">
                                                    <a class="menulink " ng-class="c.isSelected?'selected-url':''" ng-href="{{::c.Location}}">{{::c.Name}} </a>
                                                </li>
                                            </ul>
                                            <ul class="nav" ng-if="c.RenderedAsView">
                                                <li class="waves-effect waves-classic dll-menu menu-item-list-ligth " ng-class="c.isSelected?'selected-node':''">
                                                    <a class="menulink " ng-class="c.isSelected?'selected-url':''" ng-href="" ng-click="$root.goToFirstPageFromSubModule(c)">{{::c.Name}} </a>
                                                </li>
                                            </ul>
                                            <div ng-if="c.Childs.length > 0  && !c.RenderedAsView" class="dll-parent-menu menu-item-list-ligth">
                                                <div class="menulink waves-effect waves-block" ng-class="menusubItemsCurrent.Id == c.Id  ? 'down selected-url ':''" ng-click="setIndexSub(c)">{{::c.Name}}</div>
                                                <ul class="nav slideanimation inner-sub-menu" ng-if="menusubItemsCurrent.Id == c.Id">
                                                    <li ng-repeat="a in c.Childs" class="waves-effect waves-classic inner-list-item" ng-class="a.isSelected?'selected-node':''">
                                                        <a class="menulink" style="color:#333;" ng-class="a.isSelected?'selected-url':''" ng-href="{{::a.Location}}">{{::a.Name}}</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>

                <!-- /#sidebar-wrapper -->
                <!-- Page Content -->
                <div id="page-content-wrapper">
                    <div class="container-fluid vr-container">
                        <div class="vr-top-nav-container">
                            <div class="btn-group btn-group-custom vr-tabs vr-choices-filter vr-module-tabs-view" ng-if="$root.moduleRenderedAsView && currentPage.parent.RenderedAsView ==  true && !$root.masterLayoutSettings.IsBreadcrumbVisible">
                                <a ng-repeat="c in $root.moduleRenderedAsView.Childs | limitTo: 5 :  $root.startView " ng-href="{{::c.Location}}">
                                    <label class="hand-cursor" ng-class="c.Id == currentPage.Id ? 'choiced-view' : ''"> {{c.Name}}</label>
                                    <span style="cursor:default" ng-show="!$last">|</span>
                                </a>
                                <span style="position:relative" ng-if="$root.moduleRenderedAsView.Childs.length > 5 ">
                                    <a id="dropdownTabs" data-toggle="dropdown" aria-haspopup="false" aria-expanded="false">
                                        <span class="glyphicon glyphicon-option-horizontal hand-cursor list-view-icon" ng-class=" $root.moduleRenderedAsView.Childs.indexOf(currentPage) > 5 ? 'other-selected':''"></span>
                                    </a>
                                    <ul class="dropdown-menu " aria-labelledby="dropdownTabs">
                                        <li ng-repeat="a in $root.moduleRenderedAsView.Childs | limitTo: $root.moduleRenderedAsView.Childs.length - 5 :  5 ">
                                            <a ng-href="{{::a.Location}}" ng-class="a.Id == currentPage.Id ? 'choiced-view' : ''">
                                                {{a.Name}}
                                            </a>
                                        </li>
                                    </ul>
                                </span>
                            </div>
                            <div class="btn-group btn-group-custom vr-tabs vr-choices-filter vr-module-tabs-view" ng-if="!$root.masterLayoutSettings.IsBreadcrumbVisible">
                                <span class="btn-group btn-group-custom vr-tabs vr-choices-filter vr-module-tabs-view" ng-show="$root.showModuleViewToggle">
                                    <a href="" ng-click="$root.switchModuleDefaultView(false)">
                                        <label class="hand-cursor" ng-class=" getModuleSelectedViewClass() == false ? 'choiced-view' : ''"> {{$root.selectedMenu.Title}}</label>
                                        <span style="cursor:default">|</span>
                                    </a>
                                    <a href="" ng-click="$root.switchModuleDefaultView(true)">
                                        <label class="hand-cursor" ng-class="getModuleSelectedViewClass() == true ? 'choiced-view' : ''"> All Pages</label>
                                    </a>
                                </span>

                                <span class="btn-group btn-group-custom vr-tabs vr-choices-filter vr-module-tabs-view" ng-show="$root.showApplicationViewToggle">
                                    <span class="glyphicon glyphicon-menu-right"></span>
                                    <a href="" ng-click="$root.switchDefaultView(false)">
                                        <label class="hand-cursor" ng-class="getApplicationSelectedViewClass() == false ? 'choiced-view' : ''">{{defaultPageTitle}}</label>
                                        <span style="cursor:default">|</span>
                                    </a>
                                    <a href="" ng-click="$root.switchDefaultView(true)">
                                        <label class="hand-cursor" ng-class="getApplicationSelectedViewClass() == true ? 'choiced-view' : ''"> All Pages</label>
                                    </a>
                                </span>
                            </div>


                            <div class="vr-breadcrumb" ng-if="$root.masterLayoutSettings.IsBreadcrumbVisible">

                                <span>
                                    <a href="" ng-click="$root.goToHomePage()">@ViewBag.ProductName</a>
                                </span>
                                <span ng-if="$root.selectedMenu.parent">
                                    <span class="glyphicon glyphicon-menu-right"></span>
                                    <a href="" ng-click="$root.goToModulePage($root.selectedMenu.parent)">{{$root.selectedMenu.parent.Name}}</a>
                                </span>
                                <span ng-if="$root.selectedMenu">
                                    <span class="glyphicon glyphicon-menu-right"></span>
                                    <label ng-if="$root.selectedMenu.RenderedAsView== true ">{{$root.selectedMenu.Name}}</label>
                                    <a ng-if="$root.selectedMenu.RenderedAsView == false" href="" ng-click="$root.goToModulePage($root.selectedMenu)">{{$root.selectedMenu.Name}}</a>
                                </span>
                                <span class="btn-group btn-group-custom vr-tabs vr-choices-filter vr-module-tabs-view" ng-show="$root.showModuleViewToggle">
                                    <span class="glyphicon glyphicon-menu-right"></span>
                                    <a href="" ng-click="$root.switchModuleDefaultView(false)">
                                        <label class="hand-cursor" ng-class=" getModuleSelectedViewClass() == false ? 'choiced-view' : ''"> {{$root.selectedMenu.Title}}</label>
                                        <span style="cursor:default">|</span>
                                    </a>
                                    <a href="" ng-click="$root.switchModuleDefaultView(true)">
                                        <label class="hand-cursor" ng-class="getModuleSelectedViewClass() == true ? 'choiced-view' : ''"> All Pages</label>
                                    </a>
                                </span>

                                <span class="btn-group btn-group-custom vr-tabs vr-choices-filter vr-module-tabs-view" ng-show="$root.showApplicationViewToggle">
                                    <span class="glyphicon glyphicon-menu-right"></span>
                                    <a href="" ng-click="$root.switchDefaultView(false)">
                                        <label class="hand-cursor" ng-class="getApplicationSelectedViewClass() == false ? 'choiced-view' : ''">{{defaultPageTitle}}</label>
                                        <span style="cursor:default">|</span>
                                    </a>
                                    <a href="" ng-click="$root.switchDefaultView(true)">
                                        <label class="hand-cursor" ng-class="getApplicationSelectedViewClass() == true ? 'choiced-view' : ''"> All Pages</label>
                                    </a>
                                </span>
                                <span ng-if="currentPage">
                                    <span class="glyphicon glyphicon-menu-right" ng-show="!$root.showModuleViewToggle && !showApplicationViewToggle"></span>
                                    <label ng-if="showCurrentPageTitle()">{{currentPage.Title}}</label>

                                    <span class="btn-group btn-group-custom vr-tabs vr-choices-filter vr-module-tabs-view" ng-if="$root.moduleRenderedAsView && currentPage.parent.RenderedAsView ==  true">
                                        <a ng-repeat="c in $root.moduleRenderedAsView.Childs | limitTo: 5 :  $root.startView " ng-href="{{::c.Location}}">
                                            <label class="hand-cursor" ng-class="c.Id == currentPage.Id ? 'choiced-view' : ''"> {{c.Name}}</label>
                                            <span style="cursor:default" ng-show="!$last">|</span>
                                        </a>
                                        <span style="position:relative" ng-if="$root.moduleRenderedAsView.Childs.length > 5 ">
                                            <a id="dropdownTabs" data-toggle="dropdown" aria-haspopup="false" aria-expanded="false">
                                                <label class="glyphicon glyphicon-option-horizontal hand-cursor list-view-icon" ng-class=" $root.moduleRenderedAsView.Childs.indexOf(currentPage) > 5 ? 'other-selected':''"></label>
                                            </a>
                                            <ul class="dropdown-menu " aria-labelledby="dropdownTabs">
                                                <li ng-repeat="a in $root.moduleRenderedAsView.Childs | limitTo: $root.moduleRenderedAsView.Childs.length - 5 :  5 ">
                                                    <a ng-href="{{::a.Location}}" ng-class="a.Id == currentPage.Id ? 'choiced-view' : ''">
                                                        <label>
                                                            {{a.Name}}
                                                        </label>
                                                    </a>
                                                </li>
                                            </ul>
                                        </span>
                                    </span>
                                </span>
                            </div>
                        </div>


                        <div class="col-lg-12" ng-view id="mainNgView" ng-if="$root.mainViewReady"></div>
                        <div class="col-lg-12" ng-if="$root.mainViewError">
                            <div class="alert alert-danger" style="position:absolute;margin-top: 50px;left: 50%;transform: translate(-50%,0%);">
                                An error has occurred while initializing , please refresh the page.
                            </div>
                        </div>
                    </div>

                    <!-- /#page-content-wrapper -->
                </div>
            </div>
            <div class="version-container" ng-class="toogled == true ? '': 'collapsed-menu-in' ">
                <div class="version-label">@ViewBag.ProductVersion</div>
            </div>
        </div>

        <div class="mobile-view" ng-if="::isMobile">
            <nav class="navbar navbar-default vr-mobile-navbar">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <span class="mobile-info-item hand-cursor" ng-click="openMobileUserActionPopup()">
                            <vr-preview-image height="26px" width="26px" value="userPhotoFileId" usericon="userPhotoFileId!=null" style="display:inline-block;position: relative;top: 5px;"> </vr-preview-image>
                            <label class="vr-user-label  hand-cursor" style="position: relative; top: 15px;padding:0px 5px">{{userDisplayName}}</label>
                        </span>
                        <a class="navbar-brand hand-cursor">@ViewBag.CompanyName</a>
                    </div>
                    <div id="navbar" class="navbar-collapse collapse vr-collapse">
                        <ul class="nav navbar-nav">
                            <li class="panel-default menu-item-list" ng-repeat="item in $root.menuItems">
                                <div ng-class="item.isSelected? 'bold-item bgcolor-grad-{{::item.keyclass}}':'bgcolor-{{::item.keyclass}}'" class="panel-heading panel-heading-vr hand-cursor   boxes float-box waves-effect  waves-block dll-menu-theme" ng-click="setIndex(item)">

                                    <span ng-if="item.Childs.length > 0">
                                        <span class="glyphicon module-icon" style="top: -4px; "><img class="icon" ng-src="{{::item.Icon}}" /></span>
                                        <span class="vr-module-name" title="{{::item.Name}}">{{::item.Name}}</span>
                                        <span class=" hand-cursor  toggel">
                                            <span ng-if="item.Childs.length>0" class="glyphicon " ng-class="menuItemsCurrent.Id == item.Id ?'glyphicon-chevron-down':'glyphicon-chevron-right'" style="font-size: 10px; top: 7px;"></span>
                                        </span>
                                    </span>

                                    <ul class="nav" ng-if="item.Childs.length == 0" data-toggle="collapse" data-parent="#accordion">
                                        <li class="dll-menu menu-item-list-ligth" ng-repeat="c in item.Childs">
                                            <a class="menulink  " ng-href="{{::item.Location}}" ng-click="logfunc()">{{::item.Name}}</a>
                                        </li>
                                    </ul>
                                </div>
                                <div id="collapse-{{::item.Id}}" ng-if="menuItemsCurrent.Id == item.Id ">
                                    <div class="panel-body">
                                        <div ng-repeat="c in item.Childs">
                                            <ul class="nav">
                                                <li ng-if="c.Childs == null " class="waves-effect waves-classic dll-menu menu-item-list-ligth " ng-class="c.isSelected?'selected-node':''">
                                                    <a class="menulink " ng-class="c.isSelected?'selected-url':''" ng-href="{{::c.Location}}">{{::c.Name}} </a>
                                                </li>
                                            </ul>
                                            <div ng-if="c.Childs.length > 0" class="dll-parent-menu menu-item-list-ligth">
                                                <div class="menulink waves-effect waves-block" ng-class="menusubItemsCurrent.Id == c.Id  ? 'down selected-url ':''" ng-click="setIndexSub(c)">{{::c.Name}}</div>
                                                <ul class="nav  inner-sub-menu" ng-if="menusubItemsCurrent.Id == c.Id">
                                                    <li ng-repeat="a in c.Childs" class="waves-effect waves-classic inner-list-item" ng-class="a.isSelected?'selected-node':''">
                                                        <a class="menulink" style="color:#333;" ng-class="a.isSelected?'selected-url':''" ng-href="{{::a.Location}}">{{::a.Name}}</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div><!--/.nav-collapse -->
                </div><!--/.container-fluid -->
            </nav>
            <div>
                <h4 class="vr-page-title" ng-bind="currentPage.Title"></h4>
            </div>
            <div id="page-content-wrapper" class="vr-mobile-content-wrapper">

                <div class="container-fluid vr-container">
                    <div class="col-lg-12" ng-view id="mainNgView"></div>
                </div>
                <!-- /#page-content-wrapper -->
            </div>
        </div>


    </div>

</body>
@VRWebScripts.Render("~/bundles/helpers")
@VRWebScripts.Render("~/bundles/JQuery")
@VRWebScripts.Render("~/bundles/codemirror")
@VRWebScripts.Render("~/bundles/Angular")
@VRWebScripts.Render("~/bundles/CodemirrorDirective")
@VRWebScripts.Render("~/bundles/AngularExtensions")
@VRWebScripts.Render("~/bundles/HandsonTable")
@VRWebScripts.Render("~/bundles/bootstrap")
@VRWebScripts.Render("~/bundles/highchart")
@*@VRWebScripts.Render("~/bundles/Semantic")*@
@VRWebScripts.Render("~/bundles/Javascripts")
@VRWebScripts.Render("~/bundles/ModulesJavascripts")
@VRWebScripts.Render("~/bundles/waves")


</html>