<div class="vr-datagrid" vr-loader="ctrl.isLoadingMoreData" >
    <vr-choices onselectionchanged="ctrl.viewVisibilityChanged()" ng-show="ctrl.updateItems.length > 0">
        <vr-choice isselected="ctrl.isMainItemsShown">Main View</vr-choice>
        <vr-choice>Updated Items ({{ctrl.updateItems.length}})</vr-choice>
    </vr-choices>  
    <div class="vr-datagrid-header" ng-hide="ctrl.hideheader" ng-style="ctrl.headerStyle" ng-class="ctrl.ngClassLevel">
        <div class="vr-grid-menu-box hand-cursor " id="iddiv" ng-class="ctrl.updateItems.length > 0?'with-choices':''" ng-init="showgmenu=false" ng-class="showgmenu==true?'toggle-dd':''" ng-click="showgmenu=!showgmenu">
            <span class="vr-grid-menu-h-circle hand-cursor" ng-class="ctrl.ngClassLevel"> .</span>
            <div class="vr-grid-menu-h-dote hand-cursor">.</div>
        </div>
        <ul class="vr-grid-menu" ng-class="ctrl.updateItems.length > 0?'menu-with-choices':''" ng-show="showgmenu" click-outside="showgmenu=false" outside-if-not="iddiv">
            <li role="presentation">
                <span style="padding-left:4px;color:black;text-align:center"class="hand-cursor" aria-hidden="true" ng-click="ctrl.onExportClicked()">Export</span>
                <img src="../../Client/Javascripts/Directives/Button/images/loader-mask.gif" style="width:14px;margin-left:3px" ng-show="ctrl.showLoader()" />
            </li>
            <li role="presentation">
                <span style="padding-left:4px;color:black;text-align:center" class="hand-cursor" aria-hidden="true">Add/Remove Column</span>
                <img src="../../Client/Javascripts/Directives/Button/images/loader-mask.gif" style="width:14px;margin-left:3px" ng-show="false" />
            </li>
        </ul>
        <div style="margin:-2px" ng-style="{'width': ctrl.expandableColumnWidth, 'display':'inline-block'}" ng-show="ctrl.expandableColumnWidth != undefined">

        </div>
        <div ng-style="{'display':'inline-block', 'width': ctrl.dataColumnsSectionWidth}" ng-sortable="ctrl.headerSortableListener">
            <div ng-repeat="colDef in ctrl.columnDefs" ng-hide="colDef.isHidden" ng-style="{'width': colDef.width, 'display':'inline-block'}">
                <vr-datagridcell htmltemplate='colDef.headerCellTemplate'></vr-datagridcell>
            </div>
        </div>

    </div>

    <div id="gridBodyContainer" ng-style="ctrl.gridStyle" ng-show="ctrl.isMainItemsShown">
        <div id="gridBody">
            <div class="vr-datagrid-body" style="white-space: nowrap; background-color: Transparent; font-weight: bolder; border-right: 1px solid #D0D0D0; border-left: 1px solid #D0D0D0; " ng-if="ctrl.summaryRowHtml != undefined">
                <div style="margin:-2px" ng-style="{'width': ctrl.expandableColumnWidth, 'display':'inline-block'}" ng-show="ctrl.expandableColumnWidth != undefined">
                </div>
                <div ng-style="{'display':'inline-block', 'width': ctrl.dataColumnsSectionWidth}">
                    <div vr-htmlcompiler="ctrl.summaryRowHtml"></div>
                </div>
            </div>
            <div id="rowSection1" class="vr-datagrid-body" ng-repeat="dataItem in ctrl.datasource | filter:ctrl.clientSideFilterFunction">

            </div>
        </div>
    </div>
    <div id="gridBodyContainer_2" ng-style="ctrl.gridStyle" ng-show="!ctrl.isMainItemsShown">
        <div id="gridBody_2">
            <div id="rowSection2" class="vr-datagrid-body" ng-repeat="dataItem in ctrl.updateItems">

            </div>
        </div>
    </div>
</div>
<div ng-show="ctrl.showPager">
    <vr-pagination pagersettings="ctrl.pagerSettings"></vr-pagination>
</div>

<div id="rowTemplate">
    <div style="white-space:nowrap" ng-style="{'background-color': isRowExpanded ? '#F5F5F5' : 'Transparent', 'font-weight' :isRowExpanded ? 'bolder' : 'normal', 'border-right': '1px solid #D0D0D0', 'border-left': '1px solid #D0D0D0'}">
        <div style="margin:-2px" ng-style="{'width': $parent.ctrl.expandableColumnWidth, 'display':'inline-block'}" ng-show="$parent.ctrl.expandableColumnWidth != undefined" ng-init="isRowExpanded = false">
            <label style="height: 9px;" class=" hand-cursor" ng-click="$parent.ctrl.expandRow($index, dataItem);isRowExpanded = true" ng-show="!isRowExpanded">
                <span class="glyphicon glyphicon-plus" style="top: -2px; left: 4px"></span>
            </label>
            <label style="height: 9px;" class=" hand-cursor" ng-click="$parent.ctrl.collapseRow($index, dataItem);isRowExpanded = false" ng-show="isRowExpanded">
                <span class="glyphicon glyphicon-minus" style="top: -2px; left: 4px"></span>
            </label>
        </div>
        <div ng-style="{'display':'inline-block', 'width': $parent.ctrl.dataColumnsSectionWidth}" class="vr-datagrid-row" ng-click="$parent.ctrl.onRowClicked($event);showMenu=$parent.ctrl.isActionMenuVisible(dataItem) ; " ng-mouseleave="showMenu = false">
            <div ng-class="$parent.ctrl.isActionMenuVisible(dataItem)?'vr-datagrid-datacells' : ''" vr-htmlcompiler="$parent.ctrl.rowHtml"></div>
            <ul role="menu" class="dropdown-menu gid-cell-menu am-fade-and-slide-top" ng-show=" showMenu == true"
                ng-style="{'position': 'fixed', 'left': ctrl.menuLeft,'top': ctrl.menuTop}">
                <li role="presentation" ng-if="showMenu==true">
                    <div ng-repeat="action in $parent.ctrl.getMenuActions(dataItem)" class="mark-select " style="padding-left: 2px; ">
                        <div class=" hand-cursor" ng-click="$parent.ctrl.menuActionClicked(action, dataItem)"><span style="font-size:11px">{{action.name}}</span></div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <div id="divExpandableRowContent_{{$index}}" ng-show="isRowExpanded" style="border-top: 1px solid #D0D0D0; border-right:1px solid #D0D0D0;white-space:nowrap">
        <div style="margin:-2px" ng-style="{'width': $parent.ctrl.expandableColumnWidth, 'display':'inline-block' }"></div>
        <div vr-htmlcompiler="dataItem.expandableRowTemplate" ng-style="{'width': $parent.ctrl.expandableSectionWidth, 'display':'inline-block', 'padding': '5px', 'background-color': '#F5F5F5', 'border-left':'1px solid #D0D0D0'}"></div>
    </div>
</div>