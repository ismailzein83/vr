<vr-row>
    <vr-columns width="3/4row">
        <vr-datagrid datasource="otherRates"
                     on-ready="onGridReady"
                     dataretrievalfunction="dataRetrievalFunction"
                     pagingtype="'PagingOnScroll'"
                     norowhighlightonclick="'true'"
                     idfield="Entity.RateTypeId">
            <vr-datagridcolumn headertext="'Rate Type'" field="'Entity.Name'" type="'Text'" widthfactor="58"></vr-datagridcolumn>

            <vr-datagridcolumn headertext="'Current Rate'" type="'Number'" numberprecision="'LongPrecision'" widthfactor="10">
                <div style="text-align: right">
                    <span ng-if="dataItem.FutureRate != null">
                        <a href="" ng-click="viewScope.onCurrentRateClicked(dataItem)" style="text-decoration: underline">
                            <span style="color: blue" ng-if="!dataItem.IsCurrentRateEditable">{{dataItem.CurrentRate | number: 4}}</span>
                            <span ng-if="dataItem.IsCurrentRateEditable">{{dataItem.CurrentRate | number: 4}}</span>
                        </a>
                        <vr-label ng-if="!dataItem.CurrentRate" ng-click="viewScope.onCurrentRateClicked(dataItem)" isvalue="true">
                            <a href="" style="text-decoration: underline">
                                <span ng-if="dataItem.FutureRate.IsRateEditable">Pending Rate</span>
                                <span ng-if="!dataItem.FutureRate.IsRateEditable" style="color: blue; ">Pending Rate</span>
                            </a>
                        </vr-label><sup style="text-decoration: none">*</sup>
                    </span>
                    <span ng-if="dataItem.FutureRate == null">
                        <span style="color: blue; " ng-if="!dataItem.IsCurrentRateEditable">{{dataItem.CurrentRate | number: 4}}</span>
                        <span ng-if="dataItem.IsCurrentRateEditable">{{dataItem.CurrentRate | number: 4}}</span>
                    </span>
                </div>
            </vr-datagridcolumn>

            <vr-datagridcolumn headertext="'New Rate'" widthfactor="10" disablesorting>
                <span vr-disabled="!viewScope.areOtherRatesEditable()">
                    <vr-textbox type="number"
                                value="dataItem.NewRate"
                                onvaluechanged="viewScope.onNewRateChanged(dataItem)"
                                onblurtextbox="viewScope.onNewRateBlurred(dataItem)"
                                customvalidate="viewScope.validateNewRate(dataItem)"
                                tonextinput>
                    </vr-textbox>
                </span>
            </vr-datagridcolumn>

            <vr-datagridcolumn widthfactor="2">
                <div style="text-align: left">
                    <span class="{{'glyphicon ' + dataItem.RateChangeTypeIcon}}" title="{{dataItem.RateChangeTypeIconTooltip}}" />
                </div>
            </vr-datagridcolumn>

            <vr-datagridcolumn headertext="'BED'" widthfactor="10">
                <span vr-disabled="!viewScope.areOtherRatesEditable()">
                    <span vr-disabled="dataItem.CurrentRate != null">
                        <vr-datetimepicker type="date" value="dataItem.CurrentRateBED" ng-hide="dataItem.NewRate != null"></vr-datetimepicker>
                    </span>
                    <vr-datetimepicker type="date" value="dataItem.NewRateBED" customvalidate="viewScope.validateNewRateDates(dataItem)" ng-show="dataItem.NewRate != null" isrequired="dataItem.NewRate != null">
                </span>
            </vr-datagridcolumn>
            <vr-datagridcolumn headertext="'EED'" widthfactor="10">
                <span vr-disabled="!viewScope.areOtherRatesEditable()">
                    <vr-datetimepicker type="date" value="dataItem.CurrentRateNewEED" onvaluechanged="viewScope.onCurrentRateNewEEDChanged()" ng-hide="dataItem.NewRate != null"></vr-datetimepicker>
                    <vr-datetimepicker type="date" value="dataItem.NewRateEED" customvalidate="viewScope.validateNewRateDates(dataItem)" ng-show="dataItem.NewRate != null"></vr-datetimepicker>
                </span>
            </vr-datagridcolumn>
        </vr-datagrid>
    </vr-columns>
</vr-row>