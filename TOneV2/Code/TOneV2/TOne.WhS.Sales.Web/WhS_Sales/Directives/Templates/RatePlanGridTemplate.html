<vr-row>
    <vr-columns width="fullrow" vr-loader="isLoading">
        <vr-datagrid on-ready="onGridReady"
                     datasource="zoneItems"
                     loadmoredata="loadMoreData"
                     idfield="ZoneId"
                     norowhighlightonclick="'true'"
                     hidegridmenu>
            <vr-datagridcolumn headertext="'Zone'" field="'ZoneName'" type="'Text'" widthfactor="20" disablesorting></vr-datagridcolumn>
            <vr-datagridcolumn headertext="'Effective Routing Product'" field="'EffectiveRoutingProductName'" type="'Text'" isfielddynamic="true" widthfactor="15" disablesorting></vr-datagridcolumn>
            <vr-datagridcolumn headertext="'Route Options'" widthfactor="50" disablesorting>
                <div vr-loader="dataItem.isLoadingRouteOptions">
                    <vr-whs-routing-zonerouteoptions on-ready="dataItem.onRouteOptionsReady"></vr-whs-routing-zonerouteoptions>
                </div>
            </vr-datagridcolumn>
            <vr-datagridcolumn ng-repeat="method in costCalculationMethods" headertext="method.Title" field="'Costs[' + $index + ']'" type="'Number'" numberprecision="'LongPrecision'" isfielddynamic="true" columnindex="3 + $index" disablesorting></vr-datagridcolumn>
            <vr-datagridcolumn headertext="'Current Rate'" field="'CurrentRate'" type="'Number'" numberprecision="'LongPrecision'" disablesorting></vr-datagridcolumn>
            <vr-datagridcolumn headertext="'Calculated Rate'" field="'CalculatedRate'" type="'Number'" numberprecision="'LongPrecision'" ng-show="rateCalculationMethod" isfielddynamic="true" disablesorting></vr-datagridcolumn>
            <vr-datagridcolumn headertext="'New Rate'" disablesorting>
                <vr-textbox type="number" tonextinput value="dataItem.NewRate" minvalue="0" customvalidate="dataItem.validateNewRate(dataItem)" onblurtextbox="viewScope.onNewRateChanged(dataItem)"></vr-textbox>
            </vr-datagridcolumn>
            <vr-datagridcolumn headertext="'BED'" disablesorting>
                <span vr-disabled="true">
                    <vr-datetimepicker type="date" value="dataItem.CurrentRateBED" ng-hide="dataItem.NewRate != null" customvalidate="dataItem.validateRateChangeDates()"></vr-datetimepicker>
                </span>
                <vr-datetimepicker type="date" value="dataItem.NewRateBED" ng-show="dataItem.NewRate != null" customvalidate="dataItem.validateNewRateDates()" isrequired="dataItem.showNewRateBED"></vr-datetimepicker>
            </vr-datagridcolumn>
            <vr-datagridcolumn headertext="'EED'" disablesorting>
                <span vr-disabled="!dataItem.IsCurrentRateEditable">
                    <vr-datetimepicker type="date" value="dataItem.CurrentRateEED" onvaluechanged="dataItem.onCurrentRateEEDChanged(dataItem)" ng-hide="dataItem.NewRate != null" customvalidate="dataItem.validateRateChangeDates()"></vr-datetimepicker>
                </span>
                <vr-datetimepicker type="date" value="dataItem.NewRateEED" ng-show="dataItem.NewRate != null" customvalidate="dataItem.validateNewRateDates()"></vr-datetimepicker>
            </vr-datagridcolumn>
            <vr-datagridexpandablerow>
                <vr-directivetabs tabitems="dataItem.drillDownExtensionObject.drillDownDirectiveTabs"></vr-directivetabs>
            </vr-datagridexpandablerow>
        </vr-datagrid>
    </vr-columns>
</vr-row>
