CREATE TABLE [dbo].[BilateralAgreement] (
    [ID]               INT            IDENTITY (1, 1) NOT NULL,
    [Title]            NVARCHAR (100) NULL,
    [Description]      NVARCHAR (250) NULL,
    [CarrierID]        VARCHAR (5)    NOT NULL,
    [StopReason]       VARCHAR (50)   CONSTRAINT [DF_BilateralAgreement_StopReason_1] DEFAULT ('') NULL,
    [BeginDate]        DATETIME       NOT NULL,
    [EndDate]          DATETIME       NOT NULL,
    [GraceDate]        DATETIME       NOT NULL,
    [StopDate]         DATETIME       CONSTRAINT [DF_BilateralAgreement_StopDate_1] DEFAULT (NULL) NULL,
    [StopActionDate]   DATETIME       CONSTRAINT [DF_BilateralAgreement_StopActionDate_1] DEFAULT (getdate()) NULL,
    [IsActive]         CHAR (1)       NULL,
    [IncludeInBilling] CHAR (1)       CONSTRAINT [DF_BilateralAgreement_IncludeInBilling_1] DEFAULT ('N') NULL,
    [AgreementType]    INT            CONSTRAINT [DF_BilateralAgreement_DealType_1] DEFAULT ((0)) NULL,
    [ContractType]     INT            CONSTRAINT [DF_BilateralAgreement_DealContract_1] DEFAULT ((0)) NULL,
    [TotalAmount]      FLOAT (53)     NULL,
    [TotalDuration]    FLOAT (53)     NULL,
    [Threshold]        FLOAT (53)     CONSTRAINT [DF_BilateralAgreement_Threshold_1] DEFAULT ((0.0)) NULL,
    [ASR]              FLOAT (53)     NULL,
    [ACD]              FLOAT (53)     NULL,
    [Rate]             FLOAT (53)     NULL,
    [NER]              FLOAT (53)     NULL,
    [IsEffective]      AS             (case when getdate()>=[BeginDate] AND getdate()<=isnull([StopDate],[GraceDate]) then 'Y' else 'N' end),
    [MaxCostRate]      FLOAT (53)     NULL,
    [MinSaleRate]      FLOAT (53)     NULL,
    [DealType]         INT            NULL,
    [TimeStamp]        ROWVERSION     NULL,
    CONSTRAINT [PK_BilateralAgreement] PRIMARY KEY CLUSTERED ([ID] ASC)
);

