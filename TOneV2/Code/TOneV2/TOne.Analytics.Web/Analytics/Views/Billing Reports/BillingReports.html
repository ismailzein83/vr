<vr-panel ng-controller="Analytics_BillingReportsController">
    <vr-form name="formFilter">
        <div ng-hide="filterSectionCollapsed" vr-loader="isInitializing">
            <vr-row>
                <vr-columns colnum="4">
                    <vr-select datatextfield="Name" datavaluefield="ReportDefinitionId"
                               datasource="reportsTypes" selectedvalues="reporttype" onselectionchanged="resetReportParams" hint="{{reporttype.Description}}"></vr-select>
                </vr-columns>
               
            </vr-row>
            <vr-row ng-show="reporttype">
                <vr-columns colnum="2" ng-if="reporttype.ParameterSettings.RequiresCustomerId">
                    <div ng-if="reporttype.ParameterSettings.RequiresSingleCustomer == false">
                        <vr-be-carriergroup ng-if="reporttype.ParameterSettings.CustomerIdNotOptional == true" type="'Customer'" isrequired isassignedcarrier="'True'" selectedvalues="params.selectedCustomers"></vr-be-carriergroup>
                        <vr-be-carriergroup ng-if="reporttype.ParameterSettings.CustomerIdNotOptional != true" type="'Customer'" isassignedcarrier="'True'" selectedvalues="params.selectedCustomers"></vr-be-carriergroup>
                    </div>
                    <div ng-if="reporttype.ParameterSettings.RequiresSingleCustomer == true">
                        <vr-select datasource="optionsCustomers" entityname="Customer" label="Customer" ng-if="reporttype.ParameterSettings.CustomerIdNotOptional == true" isrequired selectedvalues="params.customer" datatextfield="Name" datavaluefield="CarrierAccountID"></vr-select>
                    </div>
                </vr-columns>
                <vr-columns colnum="2" ng-if="reporttype.ParameterSettings.RequiresSupplierId">
                    <vr-be-carriergroup type="'Supplier'" isassignedcarrier="'True'" selectedvalues="params.selectedSuppliers"></vr-be-carriergroup>
                </vr-columns>
                <vr-columns colnum="2" ng-show="reporttype.ParameterSettings.RequiresSupplierId">
                    <vr-select datasource="periods" datatextfield="description" datavaluefield="value" label="Period"
                               selectedvalues="selectedPeriod" isrequired hidefilterbox onselectionchanged="periodSelectionChanged"></vr-select>
                </vr-columns>
                <vr-columns colnum="2">
                    <vr-datetimepicker type="date" label="From" value="fromDate" isrequired></vr-datetimepicker>
                </vr-columns>
                <vr-columns colnum="2">
                    <vr-datetimepicker type="date" label="To" value="toDate" isrequired></vr-datetimepicker>
                </vr-columns>
                <vr-columns colnum="2">
                    <vr-label>Currency</vr-label>
                    <vr-select datasource="optionsCurrencies" isrequired selectedvalues="params.selectedCurrency" datatextfield="CurrencyID" datavaluefield="CurrencyID"
                               entityname="Currencies">
                    </vr-select>
                </vr-columns>
                <vr-columns colnum="2">
                    <button ng-if="false" ng-click="export()" class="btn btn-default">Export</button>
                </vr-columns>
            </vr-row>
            <vr-row ng-show="reporttype">

                <vr-columns colnum="2" ng-show="reporttype.ParameterSettings.RequiresZoneId">
                    <vr-label>Zone</vr-label>
                    <!--<vr-select ismultipleselection datasource="optionsZones"
                               selectedvalues="params.zone" datatextfield="Name" datavaluefield="ZoneId"
                               entityname="Zone"></vr-select>-->
                    <vr-select ismultipleselection datasource="optionsZones" selectedvalues="params.zones" datatextfield="Name" datavaluefield="ZoneId"
                               entityname="Zones"></vr-select>
                </vr-columns>

                <vr-columns colnum="2" ng-if="reporttype.ParameterSettings.RequiresMargin">
                    <vr-textbox type="number" label="Margin %" value="params.margin"></vr-textbox>
                </vr-columns>
                <vr-columns colnum="2" ng-if="reporttype.ParameterSettings.RequiresGroupByCustomer">
                    <vr-label>Group By Customer</vr-label>
                    <vr-switch value="params.groupByCustomer"></vr-switch>
                </vr-columns>
                <vr-columns colnum="2" ng-if="reporttype.ParameterSettings.RequiresIsCost">
                    <vr-label>Is Cost</vr-label>
                    <vr-switch value="params.isCost"></vr-switch>
                </vr-columns>

                <vr-columns colnum="2" ng-if="reporttype.ParameterSettings.RequiresIsService">
                    <vr-label>Services</vr-label>
                    <vr-switch value="params.service"></vr-switch>
                </vr-columns>

                <vr-columns colnum="2" ng-if="reporttype.ParameterSettings.RequiresIsCommission">
                    <vr-label>Commission/Extra</vr-label>
                    <vr-switch value="params.commission"></vr-switch>
                </vr-columns>
                <vr-columns ng-hide="!params.isCost" colnum="2" ng-if="reporttype.ParameterSettings.RequiresGroupBySupplier">
                    <vr-label>By Supplier</vr-label>
                    <vr-switch value="params.bySupplier"></vr-switch>
                </vr-columns>

                <vr-columns colnum="2" ng-if="reporttype.ParameterSettings.RequiresIsExchange">
                    <vr-label>Exchange accounts</vr-label>
                    <vr-switch value="params.isExchange"></vr-switch>
                </vr-columns>
                <vr-columns colnum="2" ng-if="reporttype.ParameterSettings.RequiresTop">
                    <vr-textbox type="number" label="Top" value="params.top" ></vr-textbox>
                </vr-columns>
            </vr-row>
        </div>
    </vr-form>

    <vr-row removeline>
        <vr-actionbar showcollapsebutton="true" issectioncollapsed="filterSectionCollapsed">

            <div transclude-to="buttons">
                <vr-button type="Search" formname="formFilter" data-onclick="openReport" ng-if="reporttype"></vr-button>
            </div>
        </vr-actionbar>
    </vr-row>
</vr-panel>

