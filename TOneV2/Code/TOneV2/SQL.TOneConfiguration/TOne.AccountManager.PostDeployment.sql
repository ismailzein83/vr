/*
Post-Deployment Script Template							
--------------------------------------------------------------------------------------
 This file contains SQL statements that will be appended to the build script.		
 Use SQLCMD syntax to include a file in the post-deployment script.			
 Example:      :r .\myfile.sql								
 Use SQLCMD syntax to reference a variable in the post-deployment script.		
 Example:      :setvar TableName MyTable							
               SELECT * FROM [$(TableName)]					
--------------------------------------------------------------------------------------
*/

--[genericdata].[GenericRuleDefinition]----------------------------------------------------------------------------------------------------------------------------------------------------------------
set nocount on;
;with cte_data([ID],[DevProjectID],[Name],[Details])
as (select * from (values
--//////////////////////////////////////////////////////////////////////////////////////////////////
('3D638C43-0191-464C-9E6E-CAAA5A2E2FDC',null,'Selling Rule','{"$type":"Vanrise.GenericData.Entities.GenericRuleDefinition, Vanrise.GenericData.Entities","GenericRuleDefinitionId":"3d638c43-0191-464c-9e6e-caaa5a2e2fdc","Name":"Selling Rule","Title":"Selling Rule","CriteriaDefinition":{"$type":"Vanrise.GenericData.Entities.GenericRuleDefinitionCriteria, Vanrise.GenericData.Entities","ConfigId":"6b1a593a-e5e5-4ca4-834a-9a20a1fd16ba","Fields":{"$type":"System.Collections.Generic.List`1[[Vanrise.GenericData.Entities.GenericRuleDefinitionCriteriaField, Vanrise.GenericData.Entities]], mscorlib","$values":[{"$type":"Vanrise.GenericData.Entities.GenericRuleDefinitionCriteriaField, Vanrise.GenericData.Entities","FieldName":"AccountManager","Title":"Account Manager","FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityType, Vanrise.GenericData.MainExtensions","ConfigId":"2e16c3d4-837b-4433-b80e-7c02f6d71467","RuntimeEditor":"vr-genericdata-fieldtype-businessentity-runtimeeditor","ViewerEditor":"vr-genericdata-fieldtype-businessentity-viewereditor","OrderType":1,"BusinessEntityDefinitionId":"0146109f-4e5d-4d66-be2f-15d689c960ee","IsNullable":false,"DependantFields":{"$type":"System.Collections.Generic.List`1[[Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityTypeDependantField, Vanrise.GenericData.MainExtensions]], mscorlib","$values":[]},"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","ShowDefaultValue":true,"StoreValueSerialized":false,"CanRoundValue":false},"RuleStructureBehaviorType":0,"Priority":1,"ShowInBasicSearch":false,"IgnoreCase":false},{"$type":"Vanrise.GenericData.Entities.GenericRuleDefinitionCriteriaField, Vanrise.GenericData.Entities","FieldName":"RoutingProduct","Title":"Routing Product","FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityType, Vanrise.GenericData.MainExtensions","ConfigId":"2e16c3d4-837b-4433-b80e-7c02f6d71467","RuntimeEditor":"vr-genericdata-fieldtype-businessentity-runtimeeditor","ViewerEditor":"vr-genericdata-fieldtype-businessentity-viewereditor","OrderType":1,"BusinessEntityDefinitionId":"ddf86702-636e-4620-9dee-91241cd4f50a","IsNullable":false,"DependantFields":{"$type":"System.Collections.Generic.List`1[[Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityTypeDependantField, Vanrise.GenericData.MainExtensions]], mscorlib","$values":[]},"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","ShowDefaultValue":true,"StoreValueSerialized":false,"CanRoundValue":false},"RuleStructureBehaviorType":0,"Priority":5,"ShowInBasicSearch":false,"IgnoreCase":false},{"$type":"Vanrise.GenericData.Entities.GenericRuleDefinitionCriteriaField, Vanrise.GenericData.Entities","FieldName":"Customer","Title":"Customer","FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityType, Vanrise.GenericData.MainExtensions","ConfigId":"2e16c3d4-837b-4433-b80e-7c02f6d71467","RuntimeEditor":"vr-genericdata-fieldtype-businessentity-runtimeeditor","ViewerEditor":"vr-genericdata-fieldtype-businessentity-viewereditor","OrderType":1,"BusinessEntityDefinitionId":"ba5a57bd-1f03-440f-a469-463a48762b8f","IsNullable":true,"DependantFields":{"$type":"System.Collections.Generic.List`1[[Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityTypeDependantField, Vanrise.GenericData.MainExtensions]], mscorlib","$values":[]},"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","ShowDefaultValue":true,"StoreValueSerialized":false,"CanRoundValue":false},"RuleStructureBehaviorType":0,"Priority":2,"ShowInBasicSearch":false,"IgnoreCase":false},{"$type":"Vanrise.GenericData.Entities.GenericRuleDefinitionCriteriaField, Vanrise.GenericData.Entities","FieldName":"SellingProduct","Title":"Selling Product","FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityType, Vanrise.GenericData.MainExtensions","ConfigId":"2e16c3d4-837b-4433-b80e-7c02f6d71467","RuntimeEditor":"vr-genericdata-fieldtype-businessentity-runtimeeditor","ViewerEditor":"vr-genericdata-fieldtype-businessentity-viewereditor","OrderType":1,"BusinessEntityDefinitionId":"79581bd3-1acc-4344-a67e-9bb591aac457","IsNullable":false,"DependantFields":{"$type":"System.Collections.Generic.List`1[[Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityTypeDependantField, Vanrise.GenericData.MainExtensions]], mscorlib","$values":[]},"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","ShowDefaultValue":true,"StoreValueSerialized":false,"CanRoundValue":false},"RuleStructureBehaviorType":0,"Priority":3,"ShowInBasicSearch":false,"IgnoreCase":false},{"$type":"Vanrise.GenericData.Entities.GenericRuleDefinitionCriteriaField, Vanrise.GenericData.Entities","FieldName":"SaleZone","Title":"Sale Zone","FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityType, Vanrise.GenericData.MainExtensions","ConfigId":"2e16c3d4-837b-4433-b80e-7c02f6d71467","RuntimeEditor":"vr-genericdata-fieldtype-businessentity-runtimeeditor","ViewerEditor":"vr-genericdata-fieldtype-businessentity-viewereditor","OrderType":1,"BusinessEntityDefinitionId":"900d0e5d-0fa7-428e-a83b-cd64e16f7415","IsNullable":false,"DependantFields":{"$type":"System.Collections.Generic.List`1[[Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityTypeDependantField, Vanrise.GenericData.MainExtensions]], mscorlib","$values":[]},"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","ShowDefaultValue":true,"StoreValueSerialized":false,"CanRoundValue":false},"RuleStructureBehaviorType":0,"Priority":4,"ShowInBasicSearch":false,"IgnoreCase":false}]},"Groups":{"$type":"System.Collections.Generic.List`1[[Vanrise.GenericData.Entities.GenericRuleDefinitionCriteriaGroup, Vanrise.GenericData.Entities]], mscorlib","$values":[{"$type":"Vanrise.GenericData.Entities.GenericRuleDefinitionCriteriaGroup, Vanrise.GenericData.Entities","GroupId":"f5307f42-113c-1e87-9148-7f8856bbc1b6","GroupTitle":"Type","Fields":{"$type":"System.Collections.Generic.List`1[[Vanrise.GenericData.Entities.GenericRuleDefinitionCriteriaGroupField, Vanrise.GenericData.Entities]], mscorlib","$values":[{"$type":"Vanrise.GenericData.Entities.GenericRuleDefinitionCriteriaGroupField, Vanrise.GenericData.Entities","FieldName":"Customer"},{"$type":"Vanrise.GenericData.Entities.GenericRuleDefinitionCriteriaGroupField, Vanrise.GenericData.Entities","FieldName":"SellingProduct"}]}}]}},"SettingsDefinition":{"$type":"TOne.WhS.Sales.Entities.SellingRuleDefinitionSettings, TOne.WhS.Sales.Entities","ConfigId":"a249cbd8-ea0d-48f0-a630-ad3b4f6087de","GridSettingTitle":"Threshold","SupportUpload":false},"Security":{"$type":"Vanrise.GenericData.Entities.GenericRuleDefinitionSecurity, Vanrise.GenericData.Entities","ViewRequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[{"$type":"Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities","EntityId":"a99a836d-0c03-4946-a0e2-5a758354807b","PermissionOptions":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["View"]}}]}},"AddRequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[{"$type":"Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities","EntityId":"a99a836d-0c03-4946-a0e2-5a758354807b","PermissionOptions":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["Manage"]}}]}},"EditRequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[{"$type":"Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities","EntityId":"a99a836d-0c03-4946-a0e2-5a758354807b","PermissionOptions":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["Manage"]}}]}}}}')
--\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
)c([ID],[DevProjectID],[Name],[Details]))
merge	[genericdata].[GenericRuleDefinition] as t
using	cte_data as s
on		1=1 and t.[ID] = s.[ID]
when matched then
	update set
	[DevProjectID] = s.[DevProjectID],[Name] = s.[Name],[Details] = s.[Details]
when not matched by target then
	insert([ID],[DevProjectID],[Name],[Details])
	values(s.[ID],s.[DevProjectID],s.[Name],s.[Details]);
	
		
--[common].[ExtensionConfiguration]--------------------------------------------------------------------------------------------------------------------------------------------------------------------
set nocount on;
;with cte_data([ID],[Name],[Title],[ConfigType],[Settings])
as (select * from (values
--//////////////////////////////////////////////////////////////////////////////////////////////////
('E78BD4E6-6D9C-4432-B564-5B5A1DD1EF73','MinMarginPercentage','Min Margin %','WHS_Sales_Rules_SellingRuleThresholdSetting','{"Editor":"vr-whs-sales-sellingrulesettings-threshold-minmarginpercentage"}'),
('2B794920-FE60-4186-80DE-1CB05512F338','MaxMarginPercentage','Max Margin %','WHS_Sales_Rules_SellingRuleThresholdSetting','{"Editor":"vr-whs-sales-sellingrulesettings-threshold-maxmarginpercentage"}'),
('066FCA8E-F4B8-4643-957D-AFAC44339470','MinRate','Min Rate','WHS_Sales_Rules_SellingRuleThresholdSetting','{"Editor":"vr-whs-sales-sellingrulesettings-threshold-fixed"}'),

('A249CBD8-EA0D-48F0-A630-AD3B4F6087DE','VR_WHS_SellingRule','Selling Rule','VR_GenericData_GenericRuleTypeConfig','{"Editor":"vr-whs-sales-genericruledefinitionsettings-sellingrule","RuntimeEditor":"vr-whs-sales-sellingrulesettings", "RuleTypeFQTN":"TOne.WhS.Sales.Entities.SellingRule,TOne.WhS.Sales.Entities", "RuleManagerFQTN":"TOne.WhS.Sales.Business.SellingRuleManager, TOne.WhS.Sales.Business"}'),
('ADFE8423-2666-4B45-A881-446D8C368E4C','WhS_AccountManagerAssignment','Account Manager Assignment','VR_GenericData_GenericBEOnBeforeInsertHandlerSettings','{ "Editor": "whs-be-accountmanagerassignment-onbeforesavehandler" }'),
('A6F4D0D4-3562-4151-8ED8-984CE7A83C20','DataRecordStorageAccountManagerPermanentFilter','Account Manager','VR_GenericData_PermanentFilterSettings','{"Editor": "whs-be-datarecordstorage-permanentfilter-accountmanager"}'),
('4A3AD674-9ADB-40C6-BEFD-A1813F08F333','VR_Analytic_AccountManagerAnalyticTablePermanentFilter','Account Manager','VR_Analytic_PermanentFilterSettings','{"Editor": "whs-be-analytic-permanentfilter-accountmanager" }')

--\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
)c([ID],[Name],[Title],[ConfigType],[Settings]))
merge	[common].[ExtensionConfiguration] as t
using	cte_data as s
on		1=1 and t.[ID] = s.[ID]
when matched then
	update set
	[Name] = s.[Name],[Title] = s.[Title],[ConfigType] = s.[ConfigType],[Settings] = s.[Settings]
when not matched by target then
	insert([ID],[Name],[Title],[ConfigType],[Settings])
	values(s.[ID],s.[Name],s.[Title],s.[ConfigType],s.[Settings]);
	
	
--[genericdata].[BusinessEntityDefinition]-------------------------------------------------------------------------------------------------------------------------------------------------------------
set nocount on;
;with cte_data([ID],[DevProjectID],[Name],[Title],[Settings])
as (select * from (values
--//////////////////////////////////////////////////////////////////////////////////////////////////
('79581BD3-1ACC-4344-A67E-9BB591AAC457',null,'WHS_BE_SellingProduct','Selling Product','{"$type":"Vanrise.GenericData.Entities.StaticBEDefinitionSettings, Vanrise.GenericData.Entities","SelectorUIControl":"vr-whs-be-sellingproduct-selector","ManagerFQTN":"TOne.WhS.BusinessEntity.Business.SellingProductManager, TOne.WhS.BusinessEntity.Business", "IdType": "System.Int32"}')
--\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
)c([ID],[DevProjectID],[Name],[Title],[Settings]))
merge	[genericdata].[BusinessEntityDefinition] as t
using	cte_data as s
on		1=1 and t.[ID] = s.[ID]
when matched then
	update set
	[DevProjectID] = s.[DevProjectID],[Name] = s.[Name],[Title] = s.[Title],[Settings] = s.[Settings]
when not matched by target then
	insert([ID],[DevProjectID],[Name],[Title],[Settings])
	values(s.[ID],s.[DevProjectID],s.[Name],s.[Title],s.[Settings]);
	
--[sec].[Module]---------------------------1301 to 1400---------------------------------------------------------
begin
set nocount on;
;with cte_data([Id],[Name],[Url],[ParentId],[Icon],[Rank],[AllowDynamic],[RenderedAsView])
as (select * from (values
--//////////////////////////////////////////////////////////////////////////////////////////////////

('DBEFC1B4-2538-4A2B-BF47-7CAD1CE31C42','Sale',null,'1C7569FA-43C9-4853-AE4C-1152746A34FD',null,null,0,0)

--\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
)c([Id],[Name],[Url],[ParentId],[Icon],[Rank],[AllowDynamic],[RenderedAsView]))
merge	[sec].[Module] as t
using	cte_data as s
on		1=1 and t.[Id] = s.[Id]
when matched then
	update set
	[Name] = s.[Name],[Url] = s.[Url],[ParentId] = s.[ParentId],[Icon] = s.[Icon],[Rank] = s.[Rank],[AllowDynamic] = s.[AllowDynamic], [RenderedAsView] = s.[RenderedAsView]
when not matched by target then
	insert([Id],[Name],[Url],[ParentId],[Icon],[Rank],[AllowDynamic],[RenderedAsView])
	values(s.[Id],s.[Name],s.[Url],s.[ParentId],s.[Icon],s.[Rank],s.[AllowDynamic],s.[RenderedAsView]);
--------------------------------------------------------------------------------------------------------------
end

--[sec].[View]-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
set nocount on;
;with cte_data([ID],[DevProjectID],[Name],[Title],[Url],[Module],[ActionNames],[Audience],[Content],[Settings],[Type],[Rank],[IsDeleted])
as (select * from (values
--//////////////////////////////////////////////////////////////////////////////////////////////////
('DC7132CA-8212-4F48-BC92-2948D601EA19',null,'Account Manager','Account Manager',null,'937F4A80-74FD-43BA-BCC1-F674445170BB',null,null,null,'{"$type":"Vanrise.GenericData.Business.GenericBEViewSettings, Vanrise.GenericData.Business","Settings":{"$type":"System.Collections.Generic.List`1[[Vanrise.GenericData.Business.GenericBEViewSettingItem, Vanrise.GenericData.Business]], mscorlib","$values":[{"$type":"Vanrise.GenericData.Business.GenericBEViewSettingItem, Vanrise.GenericData.Business","BusinessEntityDefinitionId":"0146109f-4e5d-4d66-be2f-15d689c960ee"}]}}','B99B2B0A-9A80-49FC-B68F-C946E1628595',2,null),
('C8E0DA0A-F0AA-4677-8386-2A8D0CA42E0B',null,'Selling Rules','Selling Rules',null,'DBEFC1B4-2538-4A2B-BF47-7CAD1CE31C42',null,null,null,'{"$type":"Vanrise.GenericData.Entities.GenericRuleViewSettings, Vanrise.GenericData.Entities","RuleDefinitionIds":{"$type":"System.Collections.Generic.List`1[[System.Guid, mscorlib]], mscorlib","$values":["3d638c43-0191-464c-9e6e-caaa5a2e2fdc"]}}','729BE766-F3D7-4BCC-9678-CCCF57BD4AAD',10,null),
('8C00BBB3-D71F-4A7A-A51B-007FDECD8211',null,'Sale Pricing Rules','Sale Pricing Rules',null																			,'DBEFC1B4-2538-4A2B-BF47-7CAD1CE31C42',null,null,null,'{"$type":"Vanrise.GenericData.Entities.GenericRuleViewSettings, Vanrise.GenericData.Entities","RuleDefinitionIds":{"$type":"System.Collections.Generic.List`1[[System.Guid, mscorlib]], mscorlib","$values":["90a47a0a-3ef9-4941-bc21-ca0be44fc5a4","8a637067-0056-4bae-b4d5-f80f00c0141b","f24cb510-0b65-48c8-a723-1f6ebfeea9e8"]}}','729BE766-F3D7-4BCC-9678-CCCF57BD4AAD',5,null)
--\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
)c([ID],[DevProjectID],[Name],[Title],[Url],[Module],[ActionNames],[Audience],[Content],[Settings],[Type],[Rank],[IsDeleted]))
merge	[sec].[View] as t
using	cte_data as s
on		1=1 and t.[ID] = s.[ID]
when matched then
	update set 
	[DevProjectID] = s.[DevProjectID],[Name] = s.[Name],[Title] = s.[Title],[Url] = s.[Url],[Module] = s.[Module],[ActionNames] = s.[ActionNames],[Content] = s.[Content],[Settings] = s.[Settings],[Type] = s.[Type],[Rank] = s.[Rank], [IsDeleted]=s.[IsDeleted]
when not matched by target then
	insert([ID],[DevProjectID],[Name],[Title],[Url],[Module],[ActionNames],[Audience],[Content],[Settings],[Type],[Rank],[IsDeleted])
	values(s.[ID],s.[DevProjectID],s.[Name],s.[Title],s.[Url],s.[Module],s.[ActionNames],s.[Audience],s.[Content],s.[Settings],s.[Type],s.[Rank],s.[IsDeleted]);

--[sec].[BusinessEntity]-------------------3301 to 3600-------------------------------------------------------
begin
set nocount on;
;with cte_data([Id],[Name],[Title],[ModuleId],[BreakInheritance],[PermissionOptions])
as (select * from (values
--//////////////////////////////////////////////////////////////////////////////////////////////////
('470455E5-9415-4AAA-BD32-E997272044D8','WhS_AccountManager','Account Manager','61451603-E7B9-40C6-AE27-6CBA974E1B3B',0,'["View","Add","Edit"]')
--\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
)c([Id],[Name],[Title],[ModuleId],[BreakInheritance],[PermissionOptions]))
merge	[sec].[BusinessEntity] as t
using	cte_data as s
on		1=1 and t.[Id] = s.[Id]
when matched then
	update set
	[Name] = s.[Name],[Title] = s.[Title],[ModuleId] = s.[ModuleId],[BreakInheritance] = s.[BreakInheritance],[PermissionOptions] = s.[PermissionOptions]
when not matched by target then
	insert([Id],[Name],[Title],[ModuleId],[BreakInheritance],[PermissionOptions])
	values(s.[Id],s.[Name],s.[Title],s.[ModuleId],s.[BreakInheritance],s.[PermissionOptions]);
--------------------------------------------------------------------------------------------------------------
end


--[Analytic].[AnalyticTable]----------------------------------------------------------------------------
begin
set nocount on;
;with cte_data([ID],[Name],[Settings],[MeasureStyles],[PermanentFilter])
as (select * from (values
--//////////////////////////////////////////////////////////////////////////////////////////////////
('58DD0497-498D-40F2-8687-08F8356C63CC','Traffic Statistic','{"$type":"Vanrise.Analytic.Entities.AnalyticTableSettings, Vanrise.Analytic.Entities","ConnectionStringName":"TOneAnalyticsDBConnString","TableName":"[TOneWhS_Analytics].[TrafficStats15Min]","TimeColumnName":"BatchStart","DataRecordTypeIds":{"$type":"System.Collections.Generic.List`1[[System.Guid, mscorlib]], mscorlib","$values":["6cf5f7ad-5123-45d2-b47f-eca613d454f7"]},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[{"$type":"Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities","EntityId":"a611a651-b60b-483d-bc83-1c2b667a120a","PermissionOptions":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["View"]}}]}},"DataProvider":{"$type":"Vanrise.Analytic.Data.SQL.SQLAnalyticDataProvider, Vanrise.Analytic.Data.SQL","ConfigId":"3cba3f20-6535-4ebf-9704-df65ac605671"},"StatusDefinitionBEId":"a79adbc8-0ff0-4857-baca-a2c0d9fb22bf"}','{"$type":"Vanrise.Analytic.Entities.AnalyticTableMeasureStyles, Vanrise.Analytic.Entities","MeasureStyleRules":{"$type":"System.Collections.Generic.List`1[[Vanrise.Analytic.Entities.MeasureStyleRule, Vanrise.Analytic.Entities]], mscorlib","$values":[{"$type":"Vanrise.Analytic.Entities.MeasureStyleRule, Vanrise.Analytic.Entities","MeasureName":"ACD","RecommendedStyleRule":{"$type":"Vanrise.Analytic.Entities.RecommendedStyleRule, Vanrise.Analytic.Entities"},"Rules":{"$type":"System.Collections.Generic.List`1[[Vanrise.Analytic.Entities.StyleRule, Vanrise.Analytic.Entities]], mscorlib","$values":[{"$type":"Vanrise.Analytic.Entities.StyleRule, Vanrise.Analytic.Entities","RecordFilter":{"$type":"Vanrise.GenericData.Entities.NumberRecordFilter, Vanrise.GenericData.Entities","CompareOperator":4,"Value":2.0,"FieldName":"ACD"},"StatusDefinitionId":"5349b731-1110-4ab6-8bcd-7c7eb8cae394"}]}},{"$type":"Vanrise.Analytic.Entities.MeasureStyleRule, Vanrise.Analytic.Entities","MeasureName":"ASR","RecommendedStyleRule":{"$type":"Vanrise.Analytic.Entities.RecommendedStyleRule, Vanrise.Analytic.Entities"},"Rules":{"$type":"System.Collections.Generic.List`1[[Vanrise.Analytic.Entities.StyleRule, Vanrise.Analytic.Entities]], mscorlib","$values":[{"$type":"Vanrise.Analytic.Entities.StyleRule, Vanrise.Analytic.Entities","RecordFilter":{"$type":"Vanrise.GenericData.Entities.NumberRecordFilter, Vanrise.GenericData.Entities","CompareOperator":4,"Value":20.0,"FieldName":"ASR"},"StatusDefinitionId":"54ec06e6-ea1d-43e6-9a98-983c624f1567"}]}},{"$type":"Vanrise.Analytic.Entities.MeasureStyleRule, Vanrise.Analytic.Entities","MeasureName":"Attempts","Rules":{"$type":"System.Collections.Generic.List`1[[Vanrise.Analytic.Entities.StyleRule, Vanrise.Analytic.Entities]], mscorlib","$values":[]}},{"$type":"Vanrise.Analytic.Entities.MeasureStyleRule, Vanrise.Analytic.Entities","MeasureName":"PercentageProfit","RecommendedStyleRule":{"$type":"Vanrise.Analytic.Entities.RecommendedStyleRule, Vanrise.Analytic.Entities"},"Rules":{"$type":"System.Collections.Generic.List`1[[Vanrise.Analytic.Entities.StyleRule, Vanrise.Analytic.Entities]], mscorlib","$values":[{"$type":"Vanrise.Analytic.Entities.StyleRule, Vanrise.Analytic.Entities","RecordFilter":{"$type":"Vanrise.GenericData.Entities.NumberRecordFilter, Vanrise.GenericData.Entities","CompareOperator":4,"Value":0.0,"FieldName":"PercentageProfit"},"StatusDefinitionId":"5f12e34d-88f0-40bc-b332-ef9b3a4aea03"},{"$type":"Vanrise.Analytic.Entities.StyleRule, Vanrise.Analytic.Entities","RecordFilter":{"$type":"Vanrise.GenericData.Entities.NumberRecordFilter, Vanrise.GenericData.Entities","CompareOperator":2,"Value":0.0,"FieldName":"PercentageProfit"},"StatusDefinitionId":"5349b731-1110-4ab6-8bcd-7c7eb8cae394"}]}},{"$type":"Vanrise.Analytic.Entities.MeasureStyleRule, Vanrise.Analytic.Entities","MeasureName":"Profit","RecommendedStyleRule":{"$type":"Vanrise.Analytic.Entities.RecommendedStyleRule, Vanrise.Analytic.Entities"},"Rules":{"$type":"System.Collections.Generic.List`1[[Vanrise.Analytic.Entities.StyleRule, Vanrise.Analytic.Entities]], mscorlib","$values":[{"$type":"Vanrise.Analytic.Entities.StyleRule, Vanrise.Analytic.Entities","RecordFilter":{"$type":"Vanrise.GenericData.Entities.NumberRecordFilter, Vanrise.GenericData.Entities","CompareOperator":4,"Value":0.0,"FieldName":"Profit"},"StatusDefinitionId":"5f12e34d-88f0-40bc-b332-ef9b3a4aea03"},{"$type":"Vanrise.Analytic.Entities.StyleRule, Vanrise.Analytic.Entities","RecordFilter":{"$type":"Vanrise.GenericData.Entities.NumberRecordFilter, Vanrise.GenericData.Entities","CompareOperator":2,"Value":0.0,"FieldName":"Profit"},"StatusDefinitionId":"5349b731-1110-4ab6-8bcd-7c7eb8cae394"}]}}]}}','{"$type":"Vanrise.Analytic.Entities.AnalyticTablePermanentFilter, Vanrise.Analytic.Entities","Settings":{"$type":"TOne.WhS.BusinessEntity.Business.AccountManagerAnalyticPermanentFilter, TOne.WhS.BusinessEntity.Business","ConfigId":"4a3ad674-9adb-40c6-befd-a1813f08f333","CustomerAccountManagerDimension":"CustomerAccountManager","SupplierAccountManagerDimension":"SupplierAccountManager","DataType":0}}'),
('4C1AAA1B-675B-420F-8E60-26B0747CA79B','Billing Statistic','{"$type":"Vanrise.Analytic.Entities.AnalyticTableSettings, Vanrise.Analytic.Entities","ConnectionStringName":"TOneAnalyticsDBConnString","TableName":"[TOneWhS_Analytics].[BillingStats30Min]","TimeColumnName":"BatchStart","DataRecordTypeIds":{"$type":"System.Collections.Generic.List`1[[System.Guid, mscorlib]], mscorlib","$values":["7df45dea-6052-4f99-88e3-93f0562f2ffa"]},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[{"$type":"Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities","EntityId":"ab794846-853c-4402-a8e4-6f5c3a75f5f2","PermissionOptions":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["View"]}}]}},"DataProvider":{"$type":"Vanrise.Analytic.Data.SQL.SQLAnalyticDataProvider, Vanrise.Analytic.Data.SQL","ConfigId":"3cba3f20-6535-4ebf-9704-df65ac605671"}}',null,'{"$type":"Vanrise.Analytic.Entities.AnalyticTablePermanentFilter, Vanrise.Analytic.Entities","Settings":{"$type":"TOne.WhS.BusinessEntity.Business.AccountManagerAnalyticPermanentFilter, TOne.WhS.BusinessEntity.Business","ConfigId":"4a3ad674-9adb-40c6-befd-a1813f08f333","CustomerAccountManagerDimension":"CustomerAccountManager","SupplierAccountManagerDimension":"SupplierAccountManager","DataType":1}}')
--\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
)c([ID],[Name],[Settings],[MeasureStyles],[PermanentFilter]))
merge	[Analytic].[AnalyticTable] as t
using	cte_data as s
on		1=1 and t.[ID] = s.[ID]
when matched then
	update set
	[Name] = s.[Name],[Settings] = s.[Settings],[MeasureStyles] = s.[MeasureStyles],[PermanentFilter] = s.[PermanentFilter]
when not matched by target then
	insert([ID],[Name],[Settings],[MeasureStyles],[PermanentFilter])
	values(s.[ID],s.[Name],s.[Settings],s.[MeasureStyles],s.[PermanentFilter]);
----------------------------------------------------------------------------------------------------
end


--[Analytic].[AnalyticItemConfig]-------------------------------------------------------------------
delete [Analytic].[AnalyticItemConfig] where ID in ('54123AEF-6B16-48AE-AA86-3C1A51738067')
begin
set nocount on;
;with cte_data([ID],[TableId],[ItemType],[Name],[Title],[Config])
as (select * from (values
--//////////////////////////////////////////////////////////////////////////////////////////////////
('442057BC-BE81-4DEC-855C-0F5CC887F185','4C1AAA1B-675B-420F-8E60-26B0747CA79B',2,'CostExtraCharges','CostExtraCharges','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var aggregatedValue =  context.GetAggregateValue(\"SumCostExtraCharges\");\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();       \n    if(configManager.GetBillingCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","DependentAggregateNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SumCostExtraCharges"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":1,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('1BB10BEA-C675-49F0-9673-2175F4A66F63','58DD0497-498D-40F2-8687-08F8356C63CC',2,'MarkupPercentage','Markup %','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var costNet = context.GetExternalSourceMatchRecordMeasureValue(\"BillingStatsSource\", \"CostNetNotNULL\"); \nvar aggregatedValue = (decimal) 0 ;\nif(costNet != null && costNet != 0)\n   aggregatedValue =  (context.GetExternalSourceMatchRecordMeasureValue(\"BillingStatsSource\", \"SaleNetNotNULL\") - costNet ) * 100 / costNet;\nelse\n   return null;\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n          \n    if(configManager.GetTrafficCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":0,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[{"$type":"Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities","EntityId":"ab794846-853c-4402-a8e4-6f5c3a75f5f2","PermissionOptions":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["View"]}}]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('C4369BFC-C227-4997-A0F6-3CC0DDED21ED','4C1AAA1B-675B-420F-8E60-26B0747CA79B',2,'WeekEndNet','WeekEndNet','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var aggregatedValue = context.GetAggregateValue(\"SumWeekEndNet\")  / context.GetAggregateValue(\"CountWeekEndNet\") ;\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n    if(configManager.GetBillingCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","DependentAggregateNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["CountWeekEndNet"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":0,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('57D18884-78E6-49B9-99E9-4395D1BFAC6B','4C1AAA1B-675B-420F-8E60-26B0747CA79B',2,'CostOffPeakNet','CostOffPeakNet','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var aggregatedValue =  context.GetAggregateValue(\"SumCostOffPeakNet\") ;\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n    if(configManager.GetBillingCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","DependentAggregateNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SumCostOffPeakNet"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":0,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('BE1074F0-4C4F-4CC7-BC70-44FB49988664','4C1AAA1B-675B-420F-8E60-26B0747CA79B',2,'CostNetNotNULL','CostNetNotNULL','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var aggregatedValue = context.GetAggregateValue(\"SumCostNetNotNULL\");\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n     if(configManager.GetBillingCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","DependentAggregateNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SumCostNetNotNULL"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":0,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('D10BC4CA-E19E-484A-BBC5-5078A3E2B57F','4C1AAA1B-675B-420F-8E60-26B0747CA79B',2,'PercentageProfit','PercentageProfit','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var saleNet = context.GetAggregateValue(\"SumSaleNet\");\nvar costNet =  context.GetAggregateValue(\"SumCostNet\");\nvar aggregatedValue = saleNet != 0 ? (saleNet - costNet) / saleNet : 0;\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n    if(configManager.GetBillingCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","DependentAggregateNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SumCostNet","SumSaleNet"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":0,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('A56B1B93-6111-4720-9B4C-5912B31528D0','4C1AAA1B-675B-420F-8E60-26B0747CA79B',2,'CostRate','CostRate','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var aggregatedValue =  context.GetAggregateValue(\"SumCostRate\") / context.GetAggregateValue(\"CountCostRate\");\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n     if(configManager.GetBillingCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","DependentAggregateNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SumCostRate","CountCostRate"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":1,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('1573DA84-5366-4BB1-96ED-5F17425C7D1A','58DD0497-498D-40F2-8687-08F8356C63CC',2,'CostNet','Cost Net','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var aggregatedValue = context.GetExternalSourceMatchRecordMeasureValue(\"BillingStatsSource\", \"CostNetNotNULL\");\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n          \n    if(configManager.GetTrafficCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":0,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[{"$type":"Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities","EntityId":"ab794846-853c-4402-a8e4-6f5c3a75f5f2","PermissionOptions":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["View"]}}]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('33176B55-064B-43C6-86A3-6F141FCB6FC3','4C1AAA1B-675B-420F-8E60-26B0747CA79B',2,'TotalProfit','TotalProfit','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var aggregatedValue = context.GetAggregateValue(\"TotalSumSaleNet\") - context.GetAggregateValue(\"TotalSumCostNet\");\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n    if(configManager.GetBillingCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","DependentAggregateNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["TotalSumCostNet","TotalSumSaleNet"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":0,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('B76C50F8-3F7B-4718-8DEB-8812590FAC33','4C1AAA1B-675B-420F-8E60-26B0747CA79B',2,'AverageCost','AverageCost','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var sumCostRate = context.GetAggregateValue(\"SumCostRate\");\nvar countCostRate = context.GetAggregateValue(\"CountCostRate\");\nvar aggregatedValue =  countCostRate != null || countCostRate != 0? (sumCostRate /(countCostRate)):0;\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n          \n    if(configManager.GetBillingCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","DependentAggregateNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SumCostRate","CountCostRate"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":1,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('D383CF50-C630-45D9-BDED-97C65A93737B','4C1AAA1B-675B-420F-8E60-26B0747CA79B',2,'ProfitNotNULL','ProfitNotNULL','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var aggregatedValue = context.GetAggregateValue(\"SumSaleNetNotNULL\") - context.GetAggregateValue(\"SumCostNetNotNULL\");\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n    if(configManager.GetBillingCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","DependentAggregateNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SumSaleNetNotNULL","SumCostNetNotNULL"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":0,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('46B0AD22-A3F7-4C90-8759-97DD32E60732','4C1AAA1B-675B-420F-8E60-26B0747CA79B',2,'Profit','Profit','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var aggregatedValue = context.GetAggregateValue(\"SumSaleNet\") - context.GetAggregateValue(\"SumCostNet\");\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n    if(configManager.GetBillingCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","DependentAggregateNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SumCostNet","SumSaleNet"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":0,"DataType":0,"IsNullable":false,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('68C30989-2CBF-4FBA-A3D8-9BB58D53B421','4C1AAA1B-675B-420F-8E60-26B0747CA79B',2,'CostWeekEndNet','CostWeekEndNet','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var aggregatedValue =  context.GetAggregateValue(\"SumCostWeekEndNet\");\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n    if(configManager.GetBillingCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","DependentAggregateNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SumCostWeekEndNet"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":0,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('2B59A4BF-FA5F-495E-86C8-9CC440512FA3','4C1AAA1B-675B-420F-8E60-26B0747CA79B',2,'PercentageProfitNotNULL','PercentageProfitNotNULL','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var saleNet = context.GetAggregateValue(\"SumSaleNetNotNULL\");\nvar costNet =  context.GetAggregateValue(\"SumCostNetNotNULL\");\nvar aggregatedValue =  saleNet != 0 ? (saleNet - costNet) / saleNet : 0;\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n    if(configManager.GetBillingCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","DependentAggregateNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SumSaleNetNotNULL","SumCostNetNotNULL"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":0,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('155CFBA2-D987-4ECA-ABF8-AF428280E56D','4C1AAA1B-675B-420F-8E60-26B0747CA79B',2,'CostNet','CostNet','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var aggregatedValue = context.GetAggregateValue(\"SumCostNet\");\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n     if(configManager.GetBillingCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","DependentAggregateNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SumCostNet"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":0,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('F151C005-28EA-43D6-84A8-C5A35D4A813B','4C1AAA1B-675B-420F-8E60-26B0747CA79B',2,'CostWeekEndRate','CostWeekEndRate','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var aggregatedValue =  context.GetAggregateValue(\"SumCostWeekEndRate\")  / context.GetAggregateValue(\"CountCostWeekEndRate\") ;\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n    if(configManager.GetBillingCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","DependentAggregateNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SumCostWeekEndRate","CountCostWeekEndRate"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":1,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('D6F3381B-79A2-463B-958A-DB7F667DC404','4C1AAA1B-675B-420F-8E60-26B0747CA79B',2,'CostOffPeakRate','CostOffPeakRate','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var aggregatedValue =  context.GetAggregateValue(\"SumCostOffPeakRate\")  / context.GetAggregateValue(\"CountCostOffPeakRate\") ;\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n    if(configManager.GetBillingCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","DependentAggregateNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["CountCostOffPeakRate","SumCostOffPeakRate"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":1,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('AB910CF6-8026-418E-B342-E0D8796750A7','4C1AAA1B-675B-420F-8E60-26B0747CA79B',2,'TotalCostNet','TotalCostNet','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var aggregatedValue =  context.GetAggregateValue(\"TotalSumCostNet\");\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n    if(configManager.GetBillingCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","DependentAggregateNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["TotalSumCostNet"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":0,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('3DE98303-FCFA-48C6-BFB3-E626364D179D','4C1AAA1B-675B-420F-8E60-26B0747CA79B',2,'AverageCostRateDetails','AverageCostRateDetails','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var aggregatedValue =  context.GetAggregateValue(\"SumCostRateDetails\")  / context.GetAggregateValue(\"CountCostRateDetails\") ;\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n\n   if(configManager.GetBillingCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","DependentAggregateNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["CountCostRateDetails","SumCostRateDetails"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":1,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('978A86DD-8E8E-4293-8218-EBE0E3137FD0','58DD0497-498D-40F2-8687-08F8356C63CC',2,'Profit','Profit','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var aggregatedValue = context.GetExternalSourceMatchRecordMeasureValue(\"BillingStatsSource\", \"SaleNetNotNULL\") -  context.GetExternalSourceMatchRecordMeasureValue(\"BillingStatsSource\", \"CostNetNotNULL\");\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n          \n    if(configManager.GetTrafficCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":0,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[{"$type":"Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities","EntityId":"ab794846-853c-4402-a8e4-6f5c3a75f5f2","PermissionOptions":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["View"]}}]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('51C869CC-9C77-4ADC-A4C5-F7AD9A58F39E','4C1AAA1B-675B-420F-8E60-26B0747CA79B',2,'AverageCostNetDetails','AverageCostNetDetails','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var aggregatedValue =  context.GetAggregateValue(\"SumCostNetDetails\")  / context.GetAggregateValue(\"CountCostNetDetails\");\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();        \n   if(configManager.GetBillingCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","DependentAggregateNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["CountCostNetDetails","SumCostNetDetails"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":0,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('D66B858C-B601-44DD-90F8-FB24725EC8C9','4C1AAA1B-675B-420F-8E60-26B0747CA79B',2,'PercentageLoss','PercentageLoss','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var saleNet = context.GetAggregateValue(\"SumSaleNet\");\nvar costNet =  context.GetAggregateValue(\"SumCostNet\");\nvar aggregatedValue = saleNet != 0 ? (1-(costNet / saleNet)) : 0;\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n    if(configManager.GetBillingCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","DependentAggregateNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SumCostNet","SumSaleNet"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":1,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('CDE1EB24-5FD8-4D6C-AED5-9AD6E4AD2E3A','4C1AAA1B-675B-420F-8E60-26B0747CA79B',2,'CostHolidayRate','CostHolidayRate','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var aggregatedValue =  context.GetAggregateValue(\"SumCostHolidayRate\")  / context.GetAggregateValue(\"CountCostHolidayRate\") ;\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n    if(configManager.GetBillingCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","DependentAggregateNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SumCostHolidayRate","CountCostHolidayRate"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":1,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('53D67863-61D0-448C-BF97-44F69AC3D858','4C1AAA1B-675B-420F-8E60-26B0747CA79B',2,'CostNet_OrigCurr','CostNet_OrigCurr','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var aggregatedValue = context.GetAggregateValue(\"SumCostNet_OrigCurr\");\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n     if(configManager.GetBillingCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","DependentAggregateNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SumCostNet_OrigCurr"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":1,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('b8fce4bc-9d19-44f5-87e8-ed3a1003fb30','58dd0497-498d-40f2-8687-08f8356c63cc',5,'BillingStatsSource','BillingStatsSource','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureExternalSourceConfig, Vanrise.Analytic.Entities","ExtendedSettings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.AnalyticTableMeasureExternalSource, Vanrise.Analytic.MainExtensions","ConfigId":"56b17184-3e6c-4130-8e5a-329bb9720d8e","AnalyticTableId":"4c1aaa1b-675b-420f-8e60-26b0747ca79b","DimensionMappingRules":{"$type":"System.Collections.Generic.List`1[[Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRule, Vanrise.Analytic.MainExtensions]], mscorlib","$values":[{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRule, Vanrise.Analytic.MainExtensions","Name":"Same Dimensions","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRules.SameDimensionName, Vanrise.Analytic.MainExtensions","ConfigId":"d8b533f7-3375-4bd3-8d2c-65c137e7bd51","Type":1,"DimensionNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["CDRType","CostFinancialAccount","Country","Customer","CustomerProfile","Supplier","SupplierProfile","MasterZone","Switch","OriginatingMasterZone","OriginatingSecondaryZone","OriginatingZone","SaleFinancialAccount","SaleZone","SecondaryZone","SupplierZone","YearWeek"]}}},{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRule, Vanrise.Analytic.MainExtensions","Name":"Day","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRules.SpecificDimensionMapping, Vanrise.Analytic.MainExtensions","ConfigId":"1e93563d-cca6-48f4-bd34-a21b26a3b773","DimensionName":"Day","MappedDimensionName":"DayAsDate"}},{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRule, Vanrise.Analytic.MainExtensions","Name":"Hour","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRules.SpecificDimensionMapping, Vanrise.Analytic.MainExtensions","ConfigId":"1e93563d-cca6-48f4-bd34-a21b26a3b773","DimensionName":"Hour","MappedDimensionName":"Hour"}},{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRule, Vanrise.Analytic.MainExtensions","Name":"Month","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRules.SpecificDimensionMapping, Vanrise.Analytic.MainExtensions","ConfigId":"1e93563d-cca6-48f4-bd34-a21b26a3b773","DimensionName":"Month","MappedDimensionName":"MonthAsDate"}},{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRule, Vanrise.Analytic.MainExtensions","Name":"Customer Account Manager","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRules.SpecificDimensionMapping, Vanrise.Analytic.MainExtensions","ConfigId":"1e93563d-cca6-48f4-bd34-a21b26a3b773","DimensionName":"CustomerAccountManager","MappedDimensionName":"CustomerAccountManager"}},{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRule, Vanrise.Analytic.MainExtensions","Name":"Supplier Account Manager","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRules.SpecificDimensionMapping, Vanrise.Analytic.MainExtensions","ConfigId":"1e93563d-cca6-48f4-bd34-a21b26a3b773","DimensionName":"SupplierAccountManager","MappedDimensionName":"SupplierAccountManager"}}]},"MeasureMappingRules":{"$type":"System.Collections.Generic.List`1[[Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.MeasureMappingRule, Vanrise.Analytic.MainExtensions]], mscorlib","$values":[{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.MeasureMappingRule, Vanrise.Analytic.MainExtensions","MeasureMappingRuleId":"8e676687-09b3-46e6-a95e-415e64e6a44a","Name":"Priced Calls","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.MeasureMappingRules.SpecificMapping, Vanrise.Analytic.MainExtensions","ConfigId":"017eac3c-bde1-451a-a3c6-3fbf808115e6","MeasureName":"PricedCalls","MappedMeasures":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["NumberOfCalls"]}}},{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.MeasureMappingRule, Vanrise.Analytic.MainExtensions","MeasureMappingRuleId":"e01558b6-7494-4a9e-bb9c-018c800e9f22","Name":"Sale Net","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.MeasureMappingRules.SpecificMapping, Vanrise.Analytic.MainExtensions","ConfigId":"017eac3c-bde1-451a-a3c6-3fbf808115e6","MeasureName":"SaleNet","MappedMeasures":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SaleNetNotNULL"]}}},{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.MeasureMappingRule, Vanrise.Analytic.MainExtensions","MeasureMappingRuleId":"c1787ba3-9782-46ea-bf1c-492fd25db50b","Name":"Cost Net","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.MeasureMappingRules.SpecificMapping, Vanrise.Analytic.MainExtensions","ConfigId":"017eac3c-bde1-451a-a3c6-3fbf808115e6","MeasureName":"CostNet","MappedMeasures":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["CostNetNotNULL"]}}},{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.MeasureMappingRule, Vanrise.Analytic.MainExtensions","MeasureMappingRuleId":"e059f8dd-eb7d-4210-a20e-0d59bbd70149","Name":"Profit","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.MeasureMappingRules.SpecificMapping, Vanrise.Analytic.MainExtensions","ConfigId":"017eac3c-bde1-451a-a3c6-3fbf808115e6","MeasureName":"Profit","MappedMeasures":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SaleNetNotNULL","CostNetNotNULL"]}}},{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.MeasureMappingRule, Vanrise.Analytic.MainExtensions","MeasureMappingRuleId":"5fbfea8d-6e41-4a07-bf3a-f3ea4f3e7b0e","Name":"Percentage Profit","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.MeasureMappingRules.SpecificMapping, Vanrise.Analytic.MainExtensions","ConfigId":"017eac3c-bde1-451a-a3c6-3fbf808115e6","MeasureName":"PercentageProfit","MappedMeasures":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SaleNetNotNULL","CostNetNotNULL"]}}},{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.MeasureMappingRule, Vanrise.Analytic.MainExtensions","MeasureMappingRuleId":"ad73e251-2e64-488a-b48d-25aaec168f4e","Name":"Markup Percentage","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.MeasureMappingRules.SpecificMapping, Vanrise.Analytic.MainExtensions","ConfigId":"017eac3c-bde1-451a-a3c6-3fbf808115e6","MeasureName":"MarkupPercentage","MappedMeasures":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SaleNetNotNULL","CostNetNotNULL"]}}},{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.MeasureMappingRule, Vanrise.Analytic.MainExtensions","MeasureMappingRuleId":"ee84981c-0c9d-4fc3-949f-c5db24518181","Name":"Sale Duration","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.MeasureMappingRules.SpecificMapping, Vanrise.Analytic.MainExtensions","ConfigId":"017eac3c-bde1-451a-a3c6-3fbf808115e6","MeasureName":"SaleDuration","MappedMeasures":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SaleDuration"]}}},{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.MeasureMappingRule, Vanrise.Analytic.MainExtensions","MeasureMappingRuleId":"189b176a-715e-4a20-a618-4f6d0b4a1741","Name":"Cost Duration","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.MeasureMappingRules.SpecificMapping, Vanrise.Analytic.MainExtensions","ConfigId":"017eac3c-bde1-451a-a3c6-3fbf808115e6","MeasureName":"CostDuration","MappedMeasures":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["CostDuration"]}}},{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.MeasureMappingRule, Vanrise.Analytic.MainExtensions","MeasureMappingRuleId":"9d8a8671-beff-466d-94d7-f9150bf60a4e","Name":"Cost Rate Duration Avg","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.MeasureMappingRules.SpecificMapping, Vanrise.Analytic.MainExtensions","ConfigId":"017eac3c-bde1-451a-a3c6-3fbf808115e6","MeasureName":"CostRate_DurAvg","MappedMeasures":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["CostRate_DurAvg"]}}},{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.MeasureMappingRule, Vanrise.Analytic.MainExtensions","MeasureMappingRuleId":"e134622d-0664-4b5c-bf48-52bf83419b3c","Name":"Sale Rate Duration Avg","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.MeasureMappingRules.SpecificMapping, Vanrise.Analytic.MainExtensions","ConfigId":"017eac3c-bde1-451a-a3c6-3fbf808115e6","MeasureName":"SaleRate_DurAvg","MappedMeasures":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SaleRate_DurAvg"]}}},{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.MeasureMappingRule, Vanrise.Analytic.MainExtensions","MeasureMappingRuleId":"51d55875-fa5d-40f3-9a04-8739d60af7c9","Name":"Netting","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.MeasureMappingRules.SpecificMapping, Vanrise.Analytic.MainExtensions","ConfigId":"017eac3c-bde1-451a-a3c6-3fbf808115e6","MeasureName":"Netting","MappedMeasures":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["Netting"]}}},{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.MeasureMappingRule, Vanrise.Analytic.MainExtensions","MeasureMappingRuleId":"f46b2c01-c4f0-49c3-bb01-617d3d15a5bd","Name":"Global Profit","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.MeasureMappingRules.SpecificMapping, Vanrise.Analytic.MainExtensions","ConfigId":"017eac3c-bde1-451a-a3c6-3fbf808115e6","MeasureName":"GlobalProfit","MappedMeasures":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["GlobalProfit"]}}}]}}}'),
('FC7D0402-6E5F-4A40-B466-200C431C7E33','4C1AAA1B-675B-420F-8E60-26B0747CA79B',5,'BillingStatsReverseCarrierSource','BillingStatsReverseCarrierSource','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureExternalSourceConfig, Vanrise.Analytic.Entities","ExtendedSettings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.AnalyticTableMeasureExternalSource, Vanrise.Analytic.MainExtensions","ConfigId":"56b17184-3e6c-4130-8e5a-329bb9720d8e","AnalyticTableId":"4c1aaa1b-675b-420f-8e60-26b0747ca79b","DimensionMappingRules":{"$type":"System.Collections.Generic.List`1[[Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRule, Vanrise.Analytic.MainExtensions]], mscorlib","$values":[{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRule, Vanrise.Analytic.MainExtensions","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRules.SpecificDimensionMapping, Vanrise.Analytic.MainExtensions","ConfigId":"1e93563d-cca6-48f4-bd34-a21b26a3b773","DimensionName":"Customer","MappedDimensionName":"Supplier"}},{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRule, Vanrise.Analytic.MainExtensions","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRules.SpecificDimensionMapping, Vanrise.Analytic.MainExtensions","ConfigId":"1e93563d-cca6-48f4-bd34-a21b26a3b773","DimensionName":"CustomerProfile","MappedDimensionName":"SupplierProfile"}},{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRule, Vanrise.Analytic.MainExtensions","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRules.SpecificDimensionMapping, Vanrise.Analytic.MainExtensions","ConfigId":"1e93563d-cca6-48f4-bd34-a21b26a3b773","DimensionName":"Supplier","MappedDimensionName":"Customer"}},{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRule, Vanrise.Analytic.MainExtensions","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRules.SpecificDimensionMapping, Vanrise.Analytic.MainExtensions","ConfigId":"1e93563d-cca6-48f4-bd34-a21b26a3b773","DimensionName":"SupplierProfile","MappedDimensionName":"CustomerProfile"}},{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRule, Vanrise.Analytic.MainExtensions","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRules.SameDimensionName, Vanrise.Analytic.MainExtensions","ConfigId":"d8b533f7-3375-4bd3-8d2c-65c137e7bd51","Type":0}}]},"MeasureMappingRules":{"$type":"System.Collections.Generic.List`1[[Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.MeasureMappingRule, Vanrise.Analytic.MainExtensions]], mscorlib","$values":[{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.MeasureMappingRule, Vanrise.Analytic.MainExtensions","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.MeasureMappingRules.SpecificMapping, Vanrise.Analytic.MainExtensions","ConfigId":"017eac3c-bde1-451a-a3c6-3fbf808115e6","MeasureName":"Netting","MappedMeasures":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SaleNetNotNULL","CostNetNotNULL"]}}},{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.MeasureMappingRule, Vanrise.Analytic.MainExtensions","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.MeasureMappingRules.SpecificMapping, Vanrise.Analytic.MainExtensions","ConfigId":"017eac3c-bde1-451a-a3c6-3fbf808115e6","MeasureName":"GlobalProfit","MappedMeasures":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["ProfitNotNULL"]}}}]}}}'),
('26D7E0CE-209B-4D67-B97A-688A46733604','58DD0497-498D-40F2-8687-08F8356C63CC',5,'TrafficStatSource','Traffic Stat Source','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureExternalSourceConfig, Vanrise.Analytic.Entities","ExtendedSettings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.AnalyticTableMeasureExternalSource, Vanrise.Analytic.MainExtensions","ConfigId":"56b17184-3e6c-4130-8e5a-329bb9720d8e","AnalyticTableId":"58dd0497-498d-40f2-8687-08f8356c63cc","DimensionMappingRules":{"$type":"System.Collections.Generic.List`1[[Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRule, Vanrise.Analytic.MainExtensions]], mscorlib","$values":[{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRule, Vanrise.Analytic.MainExtensions","Name":"Exclude Supplier","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRules.ExcludeDimensions, Vanrise.Analytic.MainExtensions","ConfigId":"1132614a-df0c-4adc-9ce0-6064194495f6","ExcludedDimensions":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["Supplier"]}}},{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRule, Vanrise.Analytic.MainExtensions","Name":"Same Dimensions","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.DimensionMappingRules.SameDimensionName, Vanrise.Analytic.MainExtensions","ConfigId":"d8b533f7-3375-4bd3-8d2c-65c137e7bd51","Type":0}}]},"MeasureMappingRules":{"$type":"System.Collections.Generic.List`1[[Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.MeasureMappingRule, Vanrise.Analytic.MainExtensions]], mscorlib","$values":[{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.AnalyticTable.MeasureMappingRule, Vanrise.Analytic.MainExtensions","MeasureMappingRuleId":"00000000-0000-0000-0000-000000000000","Name":"Traffic Percentage","Settings":{"$type":"Vanrise.Analytic.MainExtensions.AnalyticMeasureExternalSources.MeasureMappingRules.SpecificMapping, Vanrise.Analytic.MainExtensions","ConfigId":"017eac3c-bde1-451a-a3c6-3fbf808115e6","MeasureName":"TrafficPercentage","MappedMeasures":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SumAttempts","SumNumberOfCalls"]}}}]}}}'),
('024683C2-320E-418A-8E55-157BB3B943AE','58DD0497-498D-40F2-8687-08F8356C63CC',2,'GlobalProfit','GlobalProfit','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var aggregatedValue = context.GetExternalSourceMatchRecordMeasureValue(\"BillingStatsSource\", \"GlobalProfit\");\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n          \n    if(configManager.GetTrafficCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":0,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[{"$type":"Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities","EntityId":"ab794846-853c-4402-a8e4-6f5c3a75f5f2","PermissionOptions":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["View"]}}]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('13C514C7-01CC-40E1-8917-0D6277F93176','4C1AAA1B-675B-420F-8E60-26B0747CA79B',2,'GlobalProfit','GlobalProfit','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var isCustomerGroupingIncluded = context.IsGroupingDimensionIncluded(\"Customer\") || context.IsGroupingDimensionIncluded(\"CustomerProfile\");\nvar isSupplierGroupingIncluded = context.IsGroupingDimensionIncluded(\"Supplier\") || context.IsGroupingDimensionIncluded(\"SupplierProfile\");\nvar isCustomerFilterIncluded = context.IsFilterIncluded(\"Customer\") || context.IsFilterIncluded(\"CustomerProfile\");\nvar isSupplierFilterIncluded = context.IsFilterIncluded(\"Supplier\") || context.IsFilterIncluded(\"SupplierProfile\");\n\nif(isCustomerGroupingIncluded && !isSupplierGroupingIncluded && !isSupplierFilterIncluded)\n{\n    var customerAsSupplierProfit = context.GetExternalSourceMatchRecordMeasureValue(\"BillingStatsReverseCarrierSource\", \"ProfitNotNULL\");\n    var profit = context.GetAggregateValue(\"SumSaleNetNotNULL\") - context.GetAggregateValue(\"SumCostNetNotNULL\");\n    return (decimal)(profit != null ? profit : 0) + (customerAsSupplierProfit != null ? customerAsSupplierProfit : 0);\n}\nelse if(isSupplierGroupingIncluded && !isCustomerGroupingIncluded && !isCustomerFilterIncluded)\n{\n   var supplierAsCustomerProfit = context.GetExternalSourceMatchRecordMeasureValue(\"BillingStatsReverseCarrierSource\", \"ProfitNotNULL\");\n   var profit = context.GetAggregateValue(\"SumSaleNetNotNULL\") - context.GetAggregateValue(\"SumCostNetNotNULL\");\n   var aggregatedValue = (decimal)(supplierAsCustomerProfit != null ? supplierAsCustomerProfit : 0) + (profit != null ? profit : 0);\t\n   \n   TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n    if(configManager.GetBillingCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}\nelse {\n    return null;\n}","DependentAggregateNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SumSaleNetNotNULL","SumCostNetNotNULL"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":0,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('D4D12E43-8EE1-47B1-AB81-F6DCDD016905','4C1AAA1B-675B-420F-8E60-26B0747CA79B',2,'Netting','Netting','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var isCustomerGroupingIncluded = context.IsGroupingDimensionIncluded(\"Customer\") || context.IsGroupingDimensionIncluded(\"CustomerProfile\");\nvar isSupplierGroupingIncluded = context.IsGroupingDimensionIncluded(\"Supplier\") || context.IsGroupingDimensionIncluded(\"SupplierProfile\");\nvar isCustomerFilterIncluded = context.IsFilterIncluded(\"Customer\") || context.IsFilterIncluded(\"CustomerProfile\");\nvar isSupplierFilterIncluded = context.IsFilterIncluded(\"Supplier\") || context.IsFilterIncluded(\"SupplierProfile\");\n\nif(isCustomerGroupingIncluded && !isSupplierGroupingIncluded && !isSupplierFilterIncluded)\n{\n\tvar customerAsSupplierCostNet = context.GetExternalSourceMatchRecordMeasureValue(\"BillingStatsReverseCarrierSource\", \"CostNetNotNULL\");\n    var saleNet = context.GetAggregateValue(\"SumSaleNetNotNULL\");\n    return (decimal)(saleNet != null ? saleNet : 0) - (customerAsSupplierCostNet != null ? customerAsSupplierCostNet : 0);\n}\nelse if(isSupplierGroupingIncluded && !isCustomerGroupingIncluded && !isCustomerFilterIncluded)\n{\n\tvar supplierAsCustomerSaleNet = context.GetExternalSourceMatchRecordMeasureValue(\"BillingStatsReverseCarrierSource\", \"SaleNetNotNULL\");\n    var costNet = context.GetAggregateValue(\"SumCostNetNotNULL\");\n    var aggregatedValue =  (decimal)(supplierAsCustomerSaleNet != null ? supplierAsCustomerSaleNet : 0) - (costNet != null ? costNet : 0);\n\t \n   TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n    if(configManager.GetBillingCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n    \n}\nelse {\n     return null;\n}","DependentAggregateNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SumSaleNetNotNULL","SumCostNetNotNULL"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":0,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('3F0E0A61-DD66-47F6-B8B7-AB145D58D2BE','58DD0497-498D-40F2-8687-08F8356C63CC',2,'Netting','Netting','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var aggregatedValue = context.GetExternalSourceMatchRecordMeasureValue(\"BillingStatsSource\", \"Netting\");\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n          \n    if(configManager.GetTrafficCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":0,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[{"$type":"Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities","EntityId":"ab794846-853c-4402-a8e4-6f5c3a75f5f2","PermissionOptions":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["View"]}}]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('c4867c34-7ed1-44b1-b3ff-ca5f89f1cbe9','4c1aaa1b-675b-420f-8e60-26b0747ca79b',2,'CostRate_OrigCurr','CostRate_OrigCurr','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"if(!context.IsGroupingDimensionIncluded(\"CostCurrency\"))\nthrow new NotSupportedException(\"Dimension Not Supported: CostRate_OrigCurr\");\n\nvar sumDuration = context.GetAggregateValue(\"SumCostDuration\");\nvar aggregatedValue = sumDuration != null && sumDuration > 0 ? (decimal)(context.GetAggregateValue(\"SumCostRateDurationSec_OrigCurr\") / sumDuration) : 0;\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n     if(configManager.GetBillingCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","DependentAggregateNames":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SumCostDuration","SumCostRateDurationSec_OrigCurr"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":1,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('6672CF59-A1F9-4474-ABF0-6333F8AD7CD2','2CD9CFBF-F367-4B44-AF43-1D3BCC01819C',1,'SaleDeal','Sale Deal','{"$type":"Vanrise.Analytic.Entities.AnalyticDimensionConfig, Vanrise.Analytic.Entities","SQLExpression":"SaleDealID","FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityType, Vanrise.GenericData.MainExtensions","ConfigId":"2e16c3d4-837b-4433-b80e-7c02f6d71467","RuntimeEditor":"vr-genericdata-fieldtype-businessentity-runtimeeditor","ViewerEditor":"vr-genericdata-fieldtype-businessentity-viewereditor","OrderType":1,"BusinessEntityDefinitionId":"632e3d15-71ca-455f-830f-23de9356da37","IsNullable":true,"DependantFields":{"$type":"System.Collections.Generic.List`1[[Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityTypeDependantField, Vanrise.GenericData.MainExtensions]], mscorlib","$values":[]},"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","StoreValueSerialized":false,"CanRoundValue":false},"DimensionFieldMappings":{"$type":"System.Collections.Generic.List`1[[Vanrise.Analytic.Entities.DimensionFieldMapping, Vanrise.Analytic.Entities]], mscorlib","$values":[{"$type":"Vanrise.Analytic.Entities.DimensionFieldMapping, Vanrise.Analytic.Entities","DataRecordTypeId":"6cf5f7ad-5123-45d2-b47f-eca613d454f7"}]},"IsTechnical":false}'),
('B937CED8-2BDA-4D68-B40A-051C788EDE19','58DD0497-498D-40F2-8687-08F8356C63CC',1,'SupplierAccountManager','Supplier Account Manager','{"$type":"Vanrise.Analytic.Entities.AnalyticDimensionConfig, Vanrise.Analytic.Entities","SQLExpression":"SupplierAccountManagerId","FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityType, Vanrise.GenericData.MainExtensions","ConfigId":"2e16c3d4-837b-4433-b80e-7c02f6d71467","RuntimeEditor":"vr-genericdata-fieldtype-businessentity-runtimeeditor","ViewerEditor":"vr-genericdata-fieldtype-businessentity-viewereditor","OrderType":1,"BusinessEntityDefinitionId":"0146109f-4e5d-4d66-be2f-15d689c960ee","IsNullable":true,"DependantFields":{"$type":"System.Collections.Generic.List`1[[Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityTypeDependantField, Vanrise.GenericData.MainExtensions]], mscorlib","$values":[]},"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","StoreValueSerialized":false,"CanRoundValue":false},"DimensionFieldMappings":{"$type":"System.Collections.Generic.List`1[[Vanrise.Analytic.Entities.DimensionFieldMapping, Vanrise.Analytic.Entities]], mscorlib","$values":[{"$type":"Vanrise.Analytic.Entities.DimensionFieldMapping, Vanrise.Analytic.Entities","DataRecordTypeId":"6cf5f7ad-5123-45d2-b47f-eca613d454f7","FieldName":"SupplierAccountManagerId"}]},"IsTechnical":false}'),
('10481D85-1DD8-4D79-9989-BBE2736BAAC1','58DD0497-498D-40F2-8687-08F8356C63CC',1,'SupplierValue','Supplier Value','{"$type":"Vanrise.Analytic.Entities.AnalyticDimensionConfig, Vanrise.Analytic.Entities","SQLExpression":"SupplierId","FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityType, Vanrise.GenericData.MainExtensions","ConfigId":"2e16c3d4-837b-4433-b80e-7c02f6d71467","RuntimeEditor":"vr-genericdata-fieldtype-businessentity-runtimeeditor","ViewerEditor":"vr-genericdata-fieldtype-businessentity-viewereditor","OrderType":1,"BusinessEntityDefinitionId":"8c286bcd-5766-487a-8b32-5d167ec342c0","IsNullable":true,"BERuntimeSelectorFilter":{"$type":"TOne.WhS.BusinessEntity.Business.CarrierAccountBERuntimeSelectorFilter, TOne.WhS.BusinessEntity.Business","DataType":0},"DependantFields":{"$type":"System.Collections.Generic.List`1[[Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityTypeDependantField, Vanrise.GenericData.MainExtensions]], mscorlib","$values":[]},"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","StoreValueSerialized":false,"CanRoundValue":false},"DimensionFieldMappings":{"$type":"System.Collections.Generic.List`1[[Vanrise.Analytic.Entities.DimensionFieldMapping, Vanrise.Analytic.Entities]], mscorlib","$values":[{"$type":"Vanrise.Analytic.Entities.DimensionFieldMapping, Vanrise.Analytic.Entities","DataRecordTypeId":"6cf5f7ad-5123-45d2-b47f-eca613d454f7"}]},"IsTechnical":false}'),
('16A4AAFE-283F-4406-93B8-CB8EC3B323E4','58DD0497-498D-40F2-8687-08F8356C63CC',1,'CustomerAccountManager','Customer Account Manager','{"$type":"Vanrise.Analytic.Entities.AnalyticDimensionConfig, Vanrise.Analytic.Entities","SQLExpression":"CustomerAccountManagerId","FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityType, Vanrise.GenericData.MainExtensions","ConfigId":"2e16c3d4-837b-4433-b80e-7c02f6d71467","RuntimeEditor":"vr-genericdata-fieldtype-businessentity-runtimeeditor","ViewerEditor":"vr-genericdata-fieldtype-businessentity-viewereditor","OrderType":1,"BusinessEntityDefinitionId":"0146109f-4e5d-4d66-be2f-15d689c960ee","IsNullable":true,"DependantFields":{"$type":"System.Collections.Generic.List`1[[Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityTypeDependantField, Vanrise.GenericData.MainExtensions]], mscorlib","$values":[]},"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","StoreValueSerialized":false,"CanRoundValue":false},"DimensionFieldMappings":{"$type":"System.Collections.Generic.List`1[[Vanrise.Analytic.Entities.DimensionFieldMapping, Vanrise.Analytic.Entities]], mscorlib","$values":[{"$type":"Vanrise.Analytic.Entities.DimensionFieldMapping, Vanrise.Analytic.Entities","DataRecordTypeId":"6cf5f7ad-5123-45d2-b47f-eca613d454f7","FieldName":"CustomerAccountManagerId"}]},"IsTechnical":false}'),
('013BA8E7-1D05-475D-BE2E-45C16A0C4A95','4C1AAA1B-675B-420F-8E60-26B0747CA79B',1,'SupplierValue','Supplier Value','{"$type":"Vanrise.Analytic.Entities.AnalyticDimensionConfig, Vanrise.Analytic.Entities","SQLExpression":"SupplierId","FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityType, Vanrise.GenericData.MainExtensions","ConfigId":"2e16c3d4-837b-4433-b80e-7c02f6d71467","RuntimeEditor":"vr-genericdata-fieldtype-businessentity-runtimeeditor","ViewerEditor":"vr-genericdata-fieldtype-businessentity-viewereditor","OrderType":1,"BusinessEntityDefinitionId":"8c286bcd-5766-487a-8b32-5d167ec342c0","IsNullable":false,"BERuntimeSelectorFilter":{"$type":"TOne.WhS.BusinessEntity.Business.CarrierAccountBERuntimeSelectorFilter, TOne.WhS.BusinessEntity.Business","DataType":1},"DependantFields":{"$type":"System.Collections.Generic.List`1[[Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityTypeDependantField, Vanrise.GenericData.MainExtensions]], mscorlib","$values":[]},"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","StoreValueSerialized":false,"CanRoundValue":false},"DimensionFieldMappings":{"$type":"System.Collections.Generic.List`1[[Vanrise.Analytic.Entities.DimensionFieldMapping, Vanrise.Analytic.Entities]], mscorlib","$values":[{"$type":"Vanrise.Analytic.Entities.DimensionFieldMapping, Vanrise.Analytic.Entities","DataRecordTypeId":"7df45dea-6052-4f99-88e3-93f0562f2ffa"}]},"IsTechnical":false}'),
('8936D026-8832-49A9-A9BB-5944E3CB3805','4C1AAA1B-675B-420F-8E60-26B0747CA79B',1,'CustomerAccountManager','Customer Account Manager','{"$type":"Vanrise.Analytic.Entities.AnalyticDimensionConfig, Vanrise.Analytic.Entities","SQLExpression":"CustomerAccountManagerId","FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityType, Vanrise.GenericData.MainExtensions","ConfigId":"2e16c3d4-837b-4433-b80e-7c02f6d71467","RuntimeEditor":"vr-genericdata-fieldtype-businessentity-runtimeeditor","ViewerEditor":"vr-genericdata-fieldtype-businessentity-viewereditor","OrderType":1,"BusinessEntityDefinitionId":"0146109f-4e5d-4d66-be2f-15d689c960ee","IsNullable":true,"DependantFields":{"$type":"System.Collections.Generic.List`1[[Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityTypeDependantField, Vanrise.GenericData.MainExtensions]], mscorlib","$values":[]},"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","StoreValueSerialized":false,"CanRoundValue":false},"DimensionFieldMappings":{"$type":"System.Collections.Generic.List`1[[Vanrise.Analytic.Entities.DimensionFieldMapping, Vanrise.Analytic.Entities]], mscorlib","$values":[{"$type":"Vanrise.Analytic.Entities.DimensionFieldMapping, Vanrise.Analytic.Entities","DataRecordTypeId":"7df45dea-6052-4f99-88e3-93f0562f2ffa","FieldName":"CustomerAccountManagerId"}]},"IsTechnical":false}'),
('8594DCF6-702F-4A3E-BA12-88BD2669CE5E','4C1AAA1B-675B-420F-8E60-26B0747CA79B',1,'SupplierAccountManager','Supplier Account Manager','{"$type":"Vanrise.Analytic.Entities.AnalyticDimensionConfig, Vanrise.Analytic.Entities","SQLExpression":"SupplierAccountManagerId","FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityType, Vanrise.GenericData.MainExtensions","ConfigId":"2e16c3d4-837b-4433-b80e-7c02f6d71467","RuntimeEditor":"vr-genericdata-fieldtype-businessentity-runtimeeditor","ViewerEditor":"vr-genericdata-fieldtype-businessentity-viewereditor","OrderType":1,"BusinessEntityDefinitionId":"0146109f-4e5d-4d66-be2f-15d689c960ee","IsNullable":true,"DependantFields":{"$type":"System.Collections.Generic.List`1[[Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityTypeDependantField, Vanrise.GenericData.MainExtensions]], mscorlib","$values":[]},"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","StoreValueSerialized":false,"CanRoundValue":false},"DimensionFieldMappings":{"$type":"System.Collections.Generic.List`1[[Vanrise.Analytic.Entities.DimensionFieldMapping, Vanrise.Analytic.Entities]], mscorlib","$values":[{"$type":"Vanrise.Analytic.Entities.DimensionFieldMapping, Vanrise.Analytic.Entities","DataRecordTypeId":"7df45dea-6052-4f99-88e3-93f0562f2ffa"}]},"IsTechnical":false}'),
('52707BC6-B24E-4C65-8B4F-AE7BB37080BB','58DD0497-498D-40F2-8687-08F8356C63CC',2,'CostRate_DurAvg','CostRate_DurAvg','{"$type":"Vanrise.Analytic.Entities.AnalyticMeasureConfig, Vanrise.Analytic.Entities","GetValueMethod":"var aggregatedValue = context.GetExternalSourceMatchRecordMeasureValue(\"BillingStatsSource\", \"CostRate_DurAvg\");\n\nif (!context.IsGroupingDimensionIncluded(\"Supplier\"))\n    return aggregatedValue;\n\nelse\n{\n    TOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();\n          \n    if(configManager.GetTrafficCarrierAccountFiltering() && configManager.GetDisplaySupplierAmountsCarrierAccountFiltering())\n        {\n        TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n        System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n        bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n        if (accountManagerAssignments != null)\n        {\n            var distincDimensionValues = context.GetDistinctDimensionValues(\"Supplier\");\n            if (distincDimensionValues != null && distincDimensionValues.Count > 0)\n            {\n                var dimensionValue = distincDimensionValues[0];\n\n                foreach (var accountManagerAssignement in accountManagerAssignments)\n                {\n                    if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                        return aggregatedValue;\n                }\n            }\n        }\n        return null;\n    }\n\telse \n\t\treturn aggregatedValue;\n}","FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldNumberType, Vanrise.GenericData.MainExtensions","ConfigId":"75aef329-27bd-4108-b617-f5cc05ff2aa3","ViewerEditor":"vr-genericdata-fieldtype-number-viewereditor","RuntimeEditor":"vr-genericdata-fieldtype-number-runtimeeditor","DataPrecision":1,"DataType":0,"IsNullable":true,"CanRoundValue":true,"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","ShowDefaultValue":true,"OrderType":0,"StoreValueSerialized":false},"RequiredPermission":{"$type":"Vanrise.Security.Entities.RequiredPermissionSettings, Vanrise.Security.Entities","Entries":{"$type":"System.Collections.Generic.List`1[[Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities]], mscorlib","$values":[{"$type":"Vanrise.Security.Entities.RequiredPermissionEntry, Vanrise.Security.Entities","EntityId":"ab794846-853c-4402-a8e4-6f5c3a75f5f2","PermissionOptions":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["View"]}}]}},"HideDescriptionInLegend":false,"MeasureUnit":0}'),
('93F85292-C161-4A4D-8726-62649F62833C','58DD0497-498D-40F2-8687-08F8356C63CC',1,'Customer','Customer','{"$type":"Vanrise.Analytic.Entities.AnalyticDimensionConfig, Vanrise.Analytic.Entities","TitleResourceKey":"Analytic.OrderDirection","SQLExpression":"CustomerID","Parents":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["CustomerProfile"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityType, Vanrise.GenericData.MainExtensions","ConfigId":"2e16c3d4-837b-4433-b80e-7c02f6d71467","RuntimeEditor":"vr-genericdata-fieldtype-businessentity-runtimeeditor","ViewerEditor":"vr-genericdata-fieldtype-businessentity-viewereditor","OrderType":1,"BusinessEntityDefinitionId":"ba5a57bd-1f03-440f-a469-463a48762b8f","IsNullable":false,"BERuntimeSelectorFilter":{"$type":"TOne.WhS.BusinessEntity.Business.CarrierAccountBERuntimeSelectorFilter, TOne.WhS.BusinessEntity.Business","DataType":0},"DependantFields":{"$type":"System.Collections.Generic.List`1[[Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityTypeDependantField, Vanrise.GenericData.MainExtensions]], mscorlib","$values":[]},"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","StoreValueSerialized":false,"CanRoundValue":false},"DimensionFieldMappings":{"$type":"System.Collections.Generic.List`1[[Vanrise.Analytic.Entities.DimensionFieldMapping, Vanrise.Analytic.Entities]], mscorlib","$values":[{"$type":"Vanrise.Analytic.Entities.DimensionFieldMapping, Vanrise.Analytic.Entities","DataRecordTypeId":"6cf5f7ad-5123-45d2-b47f-eca613d454f7","FieldName":"CustomerId"}]},"IsTechnical":false}'),
('5D2C366B-C5C3-4C65-AB1B-6D3FC81BB5DB','4C1AAA1B-675B-420F-8E60-26B0747CA79B',1,'Supplier','Supplier','{"$type":"Vanrise.Analytic.Entities.AnalyticDimensionConfig, Vanrise.Analytic.Entities","GetValueMethod":"var dimensionValue = (int)context.GetDimensionValue(\"SupplierValue\");\n\nTOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();         \nif(configManager.GetBillingCarrierAccountFiltering())\n{\n    TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n    System.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n    bool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n\tif (accountManagerAssignments != null)\n    {\n\tforeach (var accountManagerAssignement in accountManagerAssignments)\n        {\n            if (accountManagerAssignement.CarrierAccountId == dimensionValue)\n                return dimensionValue;\n        }\n    }\n        return null;\n}\nelse \n\treturn dimensionValue;","DependentDimensions":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SupplierValue"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityType, Vanrise.GenericData.MainExtensions","ConfigId":"2e16c3d4-837b-4433-b80e-7c02f6d71467","RuntimeEditor":"vr-genericdata-fieldtype-businessentity-runtimeeditor","ViewerEditor":"vr-genericdata-fieldtype-businessentity-viewereditor","OrderType":1,"BusinessEntityDefinitionId":"8c286bcd-5766-487a-8b32-5d167ec342c0","IsNullable":true,"BERuntimeSelectorFilter":{"$type":"TOne.WhS.BusinessEntity.Business.CarrierAccountBERuntimeSelectorFilter, TOne.WhS.BusinessEntity.Business","DataType":1},"DependantFields":{"$type":"System.Collections.Generic.List`1[[Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityTypeDependantField, Vanrise.GenericData.MainExtensions]], mscorlib","$values":[]},"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","ShowDefaultValue":true,"StoreValueSerialized":false,"CanRoundValue":false},"DimensionFieldMappings":{"$type":"System.Collections.Generic.List`1[[Vanrise.Analytic.Entities.DimensionFieldMapping, Vanrise.Analytic.Entities]], mscorlib","$values":[{"$type":"Vanrise.Analytic.Entities.DimensionFieldMapping, Vanrise.Analytic.Entities","DataRecordTypeId":"7df45dea-6052-4f99-88e3-93f0562f2ffa","FieldName":"SupplierId"}]},"IsTechnical":false}'),
('B2A1983A-AAF4-4EDC-B7BD-7C30A5476F7D','58DD0497-498D-40F2-8687-08F8356C63CC',1,'Supplier','Supplier','{"$type":"Vanrise.Analytic.Entities.AnalyticDimensionConfig, Vanrise.Analytic.Entities","GetValueMethod":"var dimensionValue = (int?)context.GetDimensionValue(\"SupplierValue\");\nif(dimensionValue.HasValue)\n{\n\tTOne.WhS.BusinessEntity.Business.ConfigManager configManager = new TOne.WhS.BusinessEntity.Business.ConfigManager();         \n\tif(configManager.GetTrafficCarrierAccountFiltering())\n\t{\n\t\tTOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager accountManagerAssignmentManager = new TOne.WhS.BusinessEntity.Business.AccountManagerAssignmentManager();\n\t\tSystem.Collections.Generic.IEnumerable<TOne.WhS.BusinessEntity.Entities.AccountManagerAssignment> accountManagerAssignments;\n\t\tbool result = accountManagerAssignmentManager.TryGetCurrentUserAccountManagerAssignments(out accountManagerAssignments);\n\t\tif (accountManagerAssignments != null)\n\t\t{\n\t\t\tforeach (var accountManagerAssignement in accountManagerAssignments)\n\t\t\t{\n\t\t\t\tif (accountManagerAssignement.CarrierAccountId == dimensionValue)\n\t\t\t\t\treturn dimensionValue;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\t\n}\n\nreturn dimensionValue;","DependentDimensions":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SupplierValue"]},"Parents":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["SupplierProfile"]},"FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityType, Vanrise.GenericData.MainExtensions","ConfigId":"2e16c3d4-837b-4433-b80e-7c02f6d71467","RuntimeEditor":"vr-genericdata-fieldtype-businessentity-runtimeeditor","ViewerEditor":"vr-genericdata-fieldtype-businessentity-viewereditor","OrderType":1,"BusinessEntityDefinitionId":"8c286bcd-5766-487a-8b32-5d167ec342c0","IsNullable":true,"BERuntimeSelectorFilter":{"$type":"TOne.WhS.BusinessEntity.Business.CarrierAccountBERuntimeSelectorFilter, TOne.WhS.BusinessEntity.Business","DataType":0},"DependantFields":{"$type":"System.Collections.Generic.List`1[[Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityTypeDependantField, Vanrise.GenericData.MainExtensions]], mscorlib","$values":[]},"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","ShowDefaultValue":true,"StoreValueSerialized":false,"CanRoundValue":false},"DimensionFieldMappings":{"$type":"System.Collections.Generic.List`1[[Vanrise.Analytic.Entities.DimensionFieldMapping, Vanrise.Analytic.Entities]], mscorlib","$values":[{"$type":"Vanrise.Analytic.Entities.DimensionFieldMapping, Vanrise.Analytic.Entities","DataRecordTypeId":"6cf5f7ad-5123-45d2-b47f-eca613d454f7","FieldName":"SupplierId"}]},"IsTechnical":false}'),
('B2B10B06-8CB1-4799-B28D-F2CA9EF2BE0D','4C1AAA1B-675B-420F-8E60-26B0747CA79B',1,'Customer','Customer','{"$type":"Vanrise.Analytic.Entities.AnalyticDimensionConfig, Vanrise.Analytic.Entities","SQLExpression":"CustomerId","FieldType":{"$type":"Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityType, Vanrise.GenericData.MainExtensions","ConfigId":"2e16c3d4-837b-4433-b80e-7c02f6d71467","RuntimeEditor":"vr-genericdata-fieldtype-businessentity-runtimeeditor","ViewerEditor":"vr-genericdata-fieldtype-businessentity-viewereditor","OrderType":1,"BusinessEntityDefinitionId":"ba5a57bd-1f03-440f-a469-463a48762b8f","IsNullable":false,"BERuntimeSelectorFilter":{"$type":"TOne.WhS.BusinessEntity.Business.CarrierAccountBERuntimeSelectorFilter, TOne.WhS.BusinessEntity.Business","DataType":1},"DependantFields":{"$type":"System.Collections.Generic.List`1[[Vanrise.GenericData.MainExtensions.DataRecordFields.FieldBusinessEntityTypeDependantField, Vanrise.GenericData.MainExtensions]], mscorlib","$values":[]},"DetailViewerEditor":"vr-genericdata-datarecordfield-defaultdetailviewer","StoreValueSerialized":false,"CanRoundValue":false},"DimensionFieldMappings":{"$type":"System.Collections.Generic.List`1[[Vanrise.Analytic.Entities.DimensionFieldMapping, Vanrise.Analytic.Entities]], mscorlib","$values":[{"$type":"Vanrise.Analytic.Entities.DimensionFieldMapping, Vanrise.Analytic.Entities","DataRecordTypeId":"7df45dea-6052-4f99-88e3-93f0562f2ffa","FieldName":"CustomerId"}]},"IsTechnical":false}')
--\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
)c([ID],[TableId],[ItemType],[Name],[Title],[Config]))
merge	[Analytic].[AnalyticItemConfig] as t
using	cte_data as s
on		1=1 and t.[ID] = s.[ID]
when matched then
	update set
	[TableId] = s.[TableId],[ItemType] = s.[ItemType],[Name] = s.[Name],[Title] = s.[Title],[Config] = s.[Config]
when not matched by target then
	insert([ID],[TableId],[ItemType],[Name],[Title],[Config])
	values(s.[ID],s.[TableId],s.[ItemType],s.[Name],s.[Title],s.[Config]);
----------------------------------------------------------------------------------------------------
end

--[bp].[BPBusinessRuleDefinition]----------------------------------------------------------------------------------------------------------------------------------------------------------------------
set nocount on;
;with cte_data([ID],[Name],[BPDefintionId],[Settings],[Rank])
as (select * from (values
--//////////////////////////////////////////////////////////////////////////////////////////////////
('B14809F3-0C6E-40A9-A126-35A22F1F7954','RatePlan_ValidateAfterProcessing','8ABA2EC4-04FD-4BB1-A593-B651943C6411','{"$type":"Vanrise.BusinessProcess.Entities.BPBusinessRuleSettings, Vanrise.BusinessProcess.Entities","Description":"New rate less than Selling Rule threshold","Condition":{"$type":"TOne.WhS.Sales.Business.BusinessRules.SellingRuleCondition, TOne.WhS.Sales.Business"},"ActionTypes":["715f7f90-2c23-4185-aeb8-eda947de3978"],"ExecutionDependsOnRules":[]}',1)
--\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
)c([ID],[Name],[BPDefintionId],[Settings],[Rank]))
merge  [bp].[BPBusinessRuleDefinition] as t
using  cte_data as s
on            1=1 and t.[ID] = s.[ID]
when matched then
       update set
       [Name] = s.[Name],[BPDefintionId] = s.[BPDefintionId],[Settings] = s.[Settings],[Rank] = s.[Rank]
when not matched by target then
       insert([ID],[Name],[BPDefintionId],[Settings],[Rank])
       values(s.[ID],s.[Name],s.[BPDefintionId],s.[Settings],s.[Rank]);



--[bp].BPBusinessRuleAction----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
set nocount on;
set identity_insert [bp].BPBusinessRuleAction on;
;with cte_data([ID],[Settings],[BusinessRuleDefinitionId])
as (select * from (values
--//////////////////////////////////////////////////////////////////////////////////////////////////
(141,'{"$type":"Vanrise.BusinessProcess.Entities.BPBusinessRuleActionSettings, Vanrise.BusinessProcess.Entities","Action":{"$type":"Vanrise.BusinessProcess.StopExecutionAction, Vanrise.BusinessProcess","BPBusinessRuleActionTypeId":"715f7f90-2c23-4185-aeb8-eda947de3978"}}','B14809F3-0C6E-40A9-A126-35A22F1F7954')
--\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
)c([ID],[Settings],[BusinessRuleDefinitionId]))
merge  [bp].[BPBusinessRuleAction] as t
using  cte_data as s
on            1=1 and t.[ID] = s.[ID]
when matched then
       update set
       [Settings] = s.[Settings],[BusinessRuleDefinitionId] = s.[BusinessRuleDefinitionId]
when not matched by target then
       insert([ID],[Settings],[BusinessRuleDefinitionId])
       values(s.[ID],s.[Settings],s.[BusinessRuleDefinitionId]);
set identity_insert [bp].BPBusinessRuleAction off;
