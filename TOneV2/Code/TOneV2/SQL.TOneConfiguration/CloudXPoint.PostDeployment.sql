/*
Post-Deployment Script Template							
--------------------------------------------------------------------------------------
 This file contains SQL statements that will be appended to the build script.		
 Use SQLCMD syntax to include a file in the post-deployment script.			
 Example:      :r .\myfile.sql								
 Use SQLCMD syntax to reference a variable in the post-deployment script.		
 Example:      :setvar TableName MyTable							
               SELECT * FROM [$(TableName)]					
--------------------------------------------------------------------------------------
*/
delete from [common].[extensionconfiguration] where [ConfigType] = 'WhS_RouteSync_SwitchRouteSynchronizer'
--[common].[extensionconfiguration]---------------------------------------------------------------------beginset nocount on;;with cte_data([ID],[Name],[Title],[ConfigType],[Settings])as (select * from (values--//////////////////////////////////////////////////////////////////////////////////////////////////('1EE51230-FE31-4D01-9289-0E27E24D3601','WhS_RouteSync_SwitchRouteSynchronizer_BuiltInIVSwitch','CloudXPoint Switch Synchronizer','WhS_RouteSync_SwitchRouteSynchronizer','{"Editor":"whs-routesync-builtinivswitch-swsync"}')--\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\)c([ID],[Name],[Title],[ConfigType],[Settings]))merge	[common].[extensionconfiguration] as tusing	cte_data as son		1=1 and t.[ID] = s.[ID]when matched then	update set	[Name] = s.[Name],[Title] = s.[Title],[ConfigType] = s.[ConfigType],[Settings] = s.[Settings]when not matched by target then	insert([ID],[Name],[Title],[ConfigType],[Settings])	values(s.[ID],s.[Name],s.[Title],s.[ConfigType],s.[Settings]);----------------------------------------------------------------------------------------------------endDelete from [TOneWhS_BE].[Switch] where [ID]>1--[TOneWhS_BE].[Switch]---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------beginset nocount on;set identity_insert [TOneWhS_BE].[Switch] on;;with cte_data([ID],[Name],[Settings],[SourceID])as (select * from (values--//////////////////////////////////////////////////////////////////////////////////////////////////(1,'IVSwitch','{"$type":"TOne.WhS.BusinessEntity.Entities.SwitchSettings, TOne.WhS.BusinessEntity.Entities","RouteSynchronizer":{"$type":"TOne.WhS.RouteSync.IVSwitch.BuiltInIVSwitchSWSync, TOne.WhS.RouteSync.IVSwitch","ConfigId":"1ee51230-fe31-4d01-9289-0e27e24d3601","OwnerName":"postgres","MasterConnectionString":"Server=192.168.110.185;Database=ustn_master;Userid=postgres;Password=postgres;","RouteConnectionString":"Server=192.168.110.185;Database=ustn_route_tables;Userid=postgres;Password=postgres;","TariffConnectionString":"Server=192.168.110.185;Database=ustn_tariffs;Userid=postgres;Password=postgres;","NumberOfOptions":4,"BlockedAccountMapping":"941","Uid":"23ae4765-bbf5-4466-0ef3-c953e562a82d"},"SwitchCDRMappingConfiguration":{"$type":"TOne.WhS.BusinessEntity.Entities.SwitchCDRMappingConfiguration, TOne.WhS.BusinessEntity.Entities"}}',null)--\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\)c([ID],[Name],[Settings],[SourceID]))merge	[TOneWhS_BE].[Switch] as tusing	cte_data as son		1=1 and t.[ID] = s.[ID]when matched then	update set	[Name] = s.[Name],[Settings] = s.[Settings],[SourceID] = s.[SourceID]when not matched by target then	insert([ID],[Name],[Settings],[SourceID])	values(s.[ID],s.[Name],s.[Settings],s.[SourceID]);set identity_insert [TOneWhS_BE].[Switch] off;ENDDelete from [TOneWhS_RouteSync].[RouteSyncDefinition] where [ID]>1--[TOneWhS_RouteSync].[RouteSyncDefinition]-------------------------------------------------------------------------------------------------------------------------------------------------------------set nocount on;set identity_insert [TOneWhS_RouteSync].[RouteSyncDefinition] on;;with cte_data([ID],[Name],[Settings])as (select * from (values--//////////////////////////////////////////////////////////////////////////////////////////////////(1,'Built In IV Switch','{"$type":"TOne.WhS.RouteSync.Entities.RouteSyncDefinitionSettings, TOne.WhS.RouteSync.Entities","RouteReader":{"$type":"TOne.WhS.Routing.Business.Extensions.RouteSyncReader, TOne.WhS.Routing.Business","RangeType":0,"ConfigId":0},"SwitchIds":{"$type":"System.Collections.Generic.List`1[[System.String, mscorlib]], mscorlib","$values":["1"]}}')--\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\)c([ID],[Name],[Settings]))merge	[TOneWhS_RouteSync].[RouteSyncDefinition] as tusing	cte_data as son		1=1 and t.[ID] = s.[ID]when matched then	update set	[Name] = s.[Name],[Settings] = s.[Settings]when not matched by target then	insert([ID],[Name],[Settings])	values(s.[ID],s.[Name],s.[Settings]);set identity_insert [TOneWhS_RouteSync].[RouteSyncDefinition] off;Delete from [sec].[View] where [ID] IN ('0D2A2A90-A3B7-42BE-AA37-7C9D2DECE9D3','B26EA2B0-06F6-4FBF-BE49-DA01859073DD')--'Switches','Route Sync Definitions'--[sec].[View]------------------------------------------------------------------------------------
begin
set nocount on;;with cte_data([ID],[Name],[Title],[Url],[Module],[ActionNames],[Audience],[Content],[Settings],[Type],[OldType],[Rank])as (select * from (values--//////////////////////////////////////////////////////////////////////////////////////////////////('9F98A163-C563-4836-B53D-212DFF6D6AF5','Translation Rules','Translation Rules Management','#/view/NP_IVSwitch/Views/TranslationRule/TranslationRuleManagement','50624672-CD25-44FD-8580-0E3AC8E34C71','NP_IVSwitch/TranslationRule/GetFilteredTranslationRules',null,null,null,'372ED3CB-4B7B-4464-9ABF-59CD7B08BD23',null,105),('979EA3A2-EF3C-4227-802E-4C501280BEDA','Codec Profiles','Codec Profiles Management','#/view/NP_IVSwitch/Views/CodecProfile/CodecProfileManagement','50624672-CD25-44FD-8580-0E3AC8E34C71','NP_IVSwitch/CodecProfile/GetFilteredCodecProfiles',null,null,null,'372ED3CB-4B7B-4464-9ABF-59CD7B08BD23',null,110),('AA625479-74DE-4092-931F-D640E4BC2921','Switch Configuration','Switch Configuration Management','#/viewwithparams/WhS_BusinessEntity/Views/Switch/SingleSwitchManagement/{"switchId":"1"}','E73C4ABA-FD03-4137-B047-F3FB4F7EED03','WhS_BE/Switch/GetFilteredSwitches & WhS_BE/Switch/UpdateSwitch',null,null,null,'372ED3CB-4B7B-4464-9ABF-59CD7B08BD23',0,4)--\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\)c([ID],[Name],[Title],[Url],[Module],[ActionNames],[Audience],[Content],[Settings],[Type],[OldType],[Rank]))merge	[sec].[View] as tusing	cte_data as son		1=1 and t.[ID] = s.[ID]when matched then	update set	[Name] = s.[Name],[Title] = s.[Title],[Url] = s.[Url],[Module] = s.[Module],[ActionNames] = s.[ActionNames],[Audience] = s.[Audience],[Content] = s.[Content],[Settings] = s.[Settings],[Type] = s.[Type],[OldType] = s.[OldType],[Rank] = s.[Rank]when not matched by target then	insert([ID],[Name],[Title],[Url],[Module],[ActionNames],[Audience],[Content],[Settings],[Type],[OldType],[Rank])	values(s.[ID],s.[Name],s.[Title],s.[Url],s.[Module],s.[ActionNames],s.[Audience],s.[Content],s.[Settings],s.[Type],s.[OldType],s.[Rank]);
--------------------------------------------------------------------------------------------------------------
end

--[sec].[SystemAction]----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------set nocount on;;with cte_data([Name],[RequiredPermissions])as (select * from (values--//////////////////////////////////////////////////////////////////////////////////////////////////('NP_IVSwitch/CodecProfile/GetFilteredCodecProfiles','NP_IVSwitch_CodecProfile: View'),('NP_IVSwitch/CodecProfile/GetCodecProfile',null),('NP_IVSwitch/CodecProfile/AddCodecProfile','NP_IVSwitch_CodecProfile: Add'),('NP_IVSwitch/CodecProfile/UpdateCodecProfile','NP_IVSwitch_CodecProfile: Edit'),('NP_IVSwitch/CodecProfile/GetCodecProfileEditorRuntime',null),('NP_IVSwitch/CodecProfile/GetCodecProfilesInfo',null),('NP_IVSwitch/TranslationRule/GetFilteredTranslationRules','NP_IVSwitch_TranslationRule: View'),('NP_IVSwitch/TranslationRule/GetTranslationRule',null),('NP_IVSwitch/TranslationRule/AddTranslationRule','NP_IVSwitch_TranslationRule: Add'),('NP_IVSwitch/TranslationRule/UpdateTranslationRule','NP_IVSwitch_TranslationRule: Edit'),('NP_IVSwitch/TranslationRule/GetTranslationRulesInfo',null)--\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\)c([Name],[RequiredPermissions]))merge	[sec].[SystemAction] as tusing	cte_data as son		1=1 and t.[Name] = s.[Name]when matched then	update set	[RequiredPermissions] = s.[RequiredPermissions]when not matched by target then	insert([Name],[RequiredPermissions])	values(s.[Name],s.[RequiredPermissions]);--[sec].[BusinessEntity]--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------set nocount on;;with cte_data([Id],[OldId],[Name],[Title],[ModuleId],[OleModuleId],[BreakInheritance],[PermissionOptions])as (select * from (values--//////////////////////////////////////////////////////////////////////////////////////////////////('BA7E48EB-E7CB-4C32-AE2D-47C9FCCBC7B6',null,'NP_IVSwitch_CodecProfile','Codec Profile','61451603-E7B9-40C6-AE27-6CBA974E1B3B',1,0,'["View", "Add", "Edit"]'),('D2D07DBA-66EA-4B68-9F00-EBD66B00A740',null,'NP_IVSwitch_TranslationRule','Translation Rule','61451603-E7B9-40C6-AE27-6CBA974E1B3B',1,0,'["View", "Add", "Edit"]')--\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\)c([Id],[OldId],[Name],[Title],[ModuleId],[OleModuleId],[BreakInheritance],[PermissionOptions]))merge	[sec].[BusinessEntity] as tusing	cte_data as son		1=1 and t.[Id] = s.[Id]when matched then	update set	[OldId] = s.[OldId],[Name] = s.[Name],[Title] = s.[Title],[ModuleId] = s.[ModuleId],[OleModuleId] = s.[OleModuleId],[BreakInheritance] = s.[BreakInheritance],[PermissionOptions] = s.[PermissionOptions]when not matched by target then	insert([Id],[OldId],[Name],[Title],[ModuleId],[OleModuleId],[BreakInheritance],[PermissionOptions])	values(s.[Id],s.[OldId],s.[Name],s.[Title],s.[ModuleId],s.[OleModuleId],s.[BreakInheritance],s.[PermissionOptions]);