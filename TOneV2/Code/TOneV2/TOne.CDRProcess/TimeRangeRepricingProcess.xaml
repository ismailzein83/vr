<Activity mc:Ignorable="sads sap" x:Class="TOne.CDRProcess.TimeRangeRepricingProcess"
 xmlns="http://schemas.microsoft.com/netfx/2009/xaml/activities"
 xmlns:local="clr-namespace:TOne.CDRProcess"
 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
 xmlns:mv="clr-namespace:Microsoft.VisualBasic;assembly=System"
 xmlns:mva="clr-namespace:Microsoft.VisualBasic.Activities;assembly=System.Activities"
 xmlns:s="clr-namespace:System;assembly=mscorlib"
 xmlns:s1="clr-namespace:System;assembly=System"
 xmlns:s2="clr-namespace:System;assembly=System.Xml"
 xmlns:s3="clr-namespace:System;assembly=System.Core"
 xmlns:s4="clr-namespace:System;assembly=System.ServiceModel"
 xmlns:sa="clr-namespace:System.Activities;assembly=System.Activities"
 xmlns:sad="clr-namespace:System.Activities.Debugger;assembly=System.Activities"
 xmlns:sads="http://schemas.microsoft.com/netfx/2010/xaml/activities/debugger"
 xmlns:sap="http://schemas.microsoft.com/netfx/2009/xaml/activities/presentation"
 xmlns:scc="clr-namespace:System.Collections.Concurrent;assembly=mscorlib"
 xmlns:scc1="clr-namespace:System.Collections.Concurrent;assembly=System"
 xmlns:scg="clr-namespace:System.Collections.Generic;assembly=System"
 xmlns:scg1="clr-namespace:System.Collections.Generic;assembly=System.ServiceModel"
 xmlns:scg2="clr-namespace:System.Collections.Generic;assembly=System.Core"
 xmlns:scg3="clr-namespace:System.Collections.Generic;assembly=mscorlib"
 xmlns:sd="clr-namespace:System.Data;assembly=System.Data"
 xmlns:sl="clr-namespace:System.Linq;assembly=System.Core"
 xmlns:st="clr-namespace:System.Text;assembly=mscorlib"
 xmlns:t="clr-namespace:TABS;assembly=TABS"
 xmlns:tr="clr-namespace:TOne.CDRProcess;assembly=TOne.CDRProcess.Activities"
 xmlns:tra="clr-namespace:TOne.CDRProcess.Activities;assembly=TOne.CDRProcess.Activities"
 xmlns:trarg="clr-namespace:TOne.CDRProcess.Arguments;assembly=TOne.CDRProcess.Arguments"
 xmlns:vbw="clr-namespace:Vanrise.BusinessProcess.WFActivities;assembly=Vanrise.BusinessProcess.WFActivities"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <x:Members>
    <x:Property Name="Input" Type="InArgument(trarg:TimeRangeRepricingProcessInput)" />
    <x:Property Name="Output" Type="OutArgument(trarg:TimeRangeRepricingProcessOutput)" />
  </x:Members>
  <sap:VirtualizedContainerService.HintSize>984,722</sap:VirtualizedContainerService.HintSize>
  <mva:VisualBasic.Settings>Assembly references and imported namespaces for internal implementation</mva:VisualBasic.Settings>
  <Sequence sad:XamlDebuggerXmlReader.FileName="C:\TFS\TOne\Code\TOneV2\TOne.CDRProcess\TimeRangeRepricingProcess.xaml" sap:VirtualizedContainerService.HintSize="944,682">
    <Sequence.Variables>
      <Variable x:TypeArguments="x:Int32" Name="cdrCount" />
      <Variable x:TypeArguments="s:DateTime" Name="start" />
    </Sequence.Variables>
    <sap:WorkflowViewStateService.ViewState>
      <scg3:Dictionary x:TypeArguments="x:String, x:Object">
        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
      </scg3:Dictionary>
    </sap:WorkflowViewStateService.ViewState>
    <Assign sap:VirtualizedContainerService.HintSize="922,60">
      <Assign.To>
        <OutArgument x:TypeArguments="s:DateTime">[start]</OutArgument>
      </Assign.To>
      <Assign.Value>
        <InArgument x:TypeArguments="s:DateTime">[DateTime.Now]</InArgument>
      </Assign.Value>
    </Assign>
    <tra:ClearTimeRangeBillingRecords sap:VirtualizedContainerService.HintSize="922,22" TimeRange="[Input.Range]" />
    <Parallel sap:VirtualizedContainerService.HintSize="922,292">
      <Parallel.Variables>
        <Variable x:TypeArguments="scc:ConcurrentQueue(tra:CDRBatch)" Default="[New ConcurrentQueue(Of CDRBatch)]" Name="queueLoadedCDRs" />
        <Variable x:TypeArguments="scc:ConcurrentQueue(sd:DataTable)" Default="[New ConcurrentQueue(Of DataTable)]" Name="queueDataTables" />
        <Variable x:TypeArguments="tra:CDRProcessingTasksStatus" Default="[New CDRProcessingTasksStatus()]" Name="tasksStatus" />
      </Parallel.Variables>
      <Sequence sap:VirtualizedContainerService.HintSize="264,246">
        <sap:WorkflowViewStateService.ViewState>
          <scg3:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg3:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
        <tra:LoadCDRs From="[Input.Range.From]" sap:VirtualizedContainerService.HintSize="242,22" QueueLoadedCDRs="[queueLoadedCDRs]" Result="[cdrCount]" To="[Input.Range.To]" />
        <Assign sap:VirtualizedContainerService.HintSize="242,60">
          <Assign.To>
            <OutArgument x:TypeArguments="x:Boolean">[tasksStatus.CDRLoadingComplete]</OutArgument>
          </Assign.To>
          <Assign.Value>
            <InArgument x:TypeArguments="x:Boolean">True</InArgument>
          </Assign.Value>
        </Assign>
      </Sequence>
      <Sequence sap:VirtualizedContainerService.HintSize="264,246">
        <sap:WorkflowViewStateService.ViewState>
          <scg3:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg3:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
        <tra:CreateBillingAndStatsTables CacheManagerId="[Input.CacheManagerID]" From="[Input.Range.From]" sap:VirtualizedContainerService.HintSize="242,22" QueueLoadedCDRs="[queueLoadedCDRs]" QueueReadyTables="[queueDataTables]" TasksStatus="[tasksStatus]" To="[Input.Range.To]" />
        <Assign sap:VirtualizedContainerService.HintSize="242,60">
          <Assign.To>
            <OutArgument x:TypeArguments="x:Boolean">[tasksStatus.CreatingDataTableComplete]</OutArgument>
          </Assign.To>
          <Assign.Value>
            <InArgument x:TypeArguments="x:Boolean">True</InArgument>
          </Assign.Value>
        </Assign>
      </Sequence>
      <tra:WriteReadyTableToDB sap:VirtualizedContainerService.HintSize="200,246" QueueReadyTables="[queueDataTables]" TasksStatus="[tasksStatus]" />
    </Parallel>
    <Assign sap:VirtualizedContainerService.HintSize="922,64">
      <Assign.To>
        <OutArgument x:TypeArguments="trarg:TimeRangeRepricingProcessOutput">[Output]</OutArgument>
      </Assign.To>
      <Assign.Value>
        <InArgument x:TypeArguments="trarg:TimeRangeRepricingProcessOutput" xml:space="preserve">[New TimeRangeRepricingProcessOutput With
{
    .CDRCount = cdrCount,
    .SpentTime = (DateTime.Now - start)
}]</InArgument>
      </Assign.Value>
    </Assign>
  </Sequence>
</Activity>