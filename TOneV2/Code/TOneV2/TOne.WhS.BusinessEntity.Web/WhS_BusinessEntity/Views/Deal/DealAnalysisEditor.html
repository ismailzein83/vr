<div vr-modalcontent ng-controller="WhS_BE_DealAnalysisEditorController" vr-loader="scopeModel.isLoading" width="'60%'">
    <vr-modalbody>
        <vr-form name="formEditor">
            <vr-tabs>

                <vr-tab header="'Setting'">
                    <vr-row>
                        <vr-columns width="1/3row">
                            <vr-textbox label="Name" value="scopeModel.Name" isrequired="true"></vr-textbox>
                        </vr-columns>
                        <vr-whs-be-carrieraccount-selector on-ready="scopeModel.onCarrierAccountSelectorReady" normal-col-num="4" getcustomers getsuppliers
                                                           isrequired="true" hideremoveicon="true" onselectionchanged="scopeModel.onCarrierAccountSelectionChanged"></vr-whs-be-carrieraccount-selector>
                        <vr-columns width="1/3row">
                            <vr-select label="Analyis Type"
                                       datasource="scopeModel.analysisTypes"
                                       datavaluefield="value"
                                       datatextfield="description"
                                       selectedvalues="scopeModel.selectedAnalysisType"
                                       isrequired="true"
                                       hideremoveicon="true">
                            </vr-select>
                        </vr-columns>
                        <vr-columns width="1/3row">
                            <vr-datetimepicker label="From Date" type="date" value="scopeModel.fromDate" onvaluechanged="scopeModel.EvalDealPeriod" isrequired="true"></vr-datetimepicker>
                        </vr-columns>
                        <vr-columns width="1/3row">
                            <vr-datetimepicker label="To Date" type="date" value="scopeModel.toDate" onvaluechanged="scopeModel.EvalDealPeriod" isrequired="true"></vr-datetimepicker>
                        </vr-columns>

                    </vr-row>

                </vr-tab>
                <vr-tab header="'Outbound Traffic'">
                    <vr-row>
                        <vr-columns width="fullrow">

                            <vr-button type="Add" data-onclick="scopeModel.addOutboundTraffic" standalone></vr-button>

                            <vr-datagrid datasource="scopeModel.outboundTraffics" norowhighlightonclick="true" menuactions="scopeModel.gridMenuActionsOutbound" maxheight="300px"
                                         ondeleterow="scopeModel.removeOutboundTraffic" hidegridmenu on-ready="scopeModel.onOutboundGridReady">
                                <vr-datagridcolumn headertext="'Destination/Group'" field="'Name'" disablesorting></vr-datagridcolumn>
                                <!--<vr-datagridcolumn headertext="'Sale Zones'" field="'Sale Zones'"  disablesorting></vr-datagridcolumn>-->
                                <vr-datagridcolumn headertext="'Duration'" field="'CommitedVolume'" summaryfield="'TotalOutVolumes'" type="'Number'" disablesorting></vr-datagridcolumn>
                                <vr-datagridcolumn headertext="'Duration per Day'" field="'DailyVolume'" type="'Number'" summaryfield="'TotalOutVolumesDay'" disablesorting></vr-datagridcolumn>
                                <vr-datagridcolumn headertext="'Deal Rate'" field="'Rate'" type="'Number'" numberprecision="'LongPrecision'" disablesorting></vr-datagridcolumn>
                                <vr-datagridcolumn headertext="'Current Cost'" field="'CurrentCost'" type="'Number'" disablesorting numberprecision="'LongPrecision'"></vr-datagridcolumn>
                                <vr-datagridcolumn headertext="'Margin per Minute'" field="'CostSavingFromRate'"  type="'Number'" disablesorting numberprecision="'LongPrecision'"></vr-datagridcolumn>
                                <vr-datagridcolumn headertext="'Margin per Period'" field="'TotalDealSaving'" type="'Number'" summaryfield="'TotalSaving'" disablesorting numberprecision="'LongPrecision'"></vr-datagridcolumn>
                                <vr-datagridcolumn headertext="'Revenue'" field="'RevenuePerDeal'" type="'Number'" summaryfield="'TotalCommitmentCost'" disablesorting numberprecision="'LongPrecision'"></vr-datagridcolumn>
                            </vr-datagrid>
                        </vr-columns>
                    </vr-row>
                </vr-tab>
                <vr-tab header="'Inbound Traffic'">
                    <vr-row>
                        <vr-columns width="fullrow">
                            <vr-button type="Add" data-onclick="scopeModel.addInboundTraffic" standalone></vr-button>

                            <vr-datagrid datasource="scopeModel.inboundTraffics" norowhighlightonclick="true" menuactions="scopeModel.gridMenuActionsInbound" maxheight="300px"
                                         ondeleterow="scopeModel.removeInboundTraffic" hidegridmenu on-ready="scopeModel.onInboundGridReady">
                                <vr-datagridcolumn headertext="'Destination/Group'" field="'Name'" disablesorting></vr-datagridcolumn>
                                <!--<vr-datagridcolumn headertext="'Sale Zones'" field="'Sale Zones'"  disablesorting></vr-datagridcolumn>-->
                                <vr-datagridcolumn headertext="'Duration'" field="'CommitedVolume'" summaryfield="'TotalInVolumes'" type="'Number'" disablesorting></vr-datagridcolumn>
                                <vr-datagridcolumn headertext="'Duration per Day'" field="'DailyVolume'" summaryfield="'TotalInVolumesDay'" type="'Number'" disablesorting></vr-datagridcolumn>
                                <vr-datagridcolumn headertext="'Deal Rate'" field="'Rate'" type="'Number'" numberprecision="'LongPrecision'" disablesorting></vr-datagridcolumn>
                                <vr-datagridcolumn headertext="'Current Sale'" field="'CurrentCost'" type="'Number'" numberprecision="'LongPrecision'" disablesorting></vr-datagridcolumn>
                                <vr-datagridcolumn headertext="'Margin per Minute'" field="'ProfitFromRate'" type="'Number'" numberprecision="'LongPrecision'" disablesorting></vr-datagridcolumn>
                                <vr-datagridcolumn headertext="'Margin per Period'" field="'DealProfit'" type="'Number'" summaryfield="'totalCustomerProfit'" numberprecision="'LongPrecision'" disablesorting></vr-datagridcolumn>
                                <vr-datagridcolumn headertext="'Revenue'" field="'Revenue'" type="'Number'" numberprecision="'LongPrecision'" summaryfield="'TotalCommitmentRevenue'" disablesorting ></vr-datagridcolumn>
                            </vr-datagrid>
                        </vr-columns>
                    </vr-row>
                </vr-tab>
            </vr-tabs>
            <div style="padding:0px 10px">
                <vr-section title="Analysis Result">
                    <vr-row removeline>
                        <vr-columns width="1/4row" >
                            <vr-label>Deal Period (Days) </vr-label>
                        </vr-columns>
                        <vr-columns width="normal">
                            <vr-lable isvalue>{{scopeModel.DealPeriod}} </vr-lable>
                        </vr-columns>

                    </vr-row>
                    <vr-row removeline>
                        <vr-columns width="1/4row">
                            <vr-label>Total Revenue Cost </vr-label>
                        </vr-columns>
                        <vr-columns width="normal">
                            <vr-lable isvalue>${{scopeModel.TotalCommitmentCost | number}} </vr-lable>
                        </vr-columns>
                    </vr-row>
                    <vr-row removeline>
                        <vr-columns width="1/4row">
                            <vr-label>Total Revenue Sale</vr-label>
                        </vr-columns>
                        <vr-columns width="normal">
                            <vr-lable isvalue>${{scopeModel.TotalCommitmentRevenue | number}} </vr-lable>
                        </vr-columns>
                    </vr-row>
                    <vr-row removeline>
                        <vr-columns width="1/4row">
                            <vr-label>Total Margin per Period (Sale)</vr-label>
                        </vr-columns>
                        <vr-columns width="normal">
                            <vr-lable isvalue>${{scopeModel.TotalCustomerProfit | number}} </vr-lable>
                        </vr-columns>
                    </vr-row>
                    <vr-row removeline>
                        <vr-columns width="1/4row">
                            <vr-label>Total Margin per Period (Cost)</vr-label>
                        </vr-columns>
                        <vr-columns width="normal">
                            <vr-lable isvalue>${{scopeModel.TotalSaving | number}} </vr-lable>
                        </vr-columns>
                    </vr-row>
                    <!--<vr-row removeline>
                        <vr-columns width="1/4row">
                            <vr-label>Total Profit (Per Month)</vr-label>
                        </vr-columns>
                        <vr-columns width="normal">
                            <vr-lable isvalue>${{scopeModel.TotalProfitMonth | number}} </vr-lable>
                        </vr-columns>
                    </vr-row>
                    <vr-row removeline>
                        <vr-columns width="1/4row">
                            <vr-label>Total Profit (Per Day)</vr-label>
                        </vr-columns>
                        <vr-columns width="normal">
                            <vr-lable isvalue>${{scopeModel.TotalProfitDay | number}} </vr-lable>
                        </vr-columns>
                    </vr-row>-->
                    <vr-row removeline>
                        <vr-columns width="1/4row">
                            <vr-label>Total Margin per Period</vr-label>
                        </vr-columns>
                        <vr-columns width="normal">
                            <vr-lable isvalue>${{scopeModel.TotalCommitmentProfit |  number}} </vr-lable>
                        </vr-columns>
                    </vr-row>
                    <vr-row removeline>
                        <vr-columns width="1/4row">
                            <vr-label>Margins</vr-label>
                        </vr-columns>
                        <vr-columns width="normal">
                            <vr-lable isvalue>{{scopeModel.Margins * 100 | number:2  }}%</vr-lable>
                        </vr-columns>
                    </vr-row>
                    <vr-row removeline>
                        <vr-columns width="1/4row">
                            <vr-label>Netting</vr-label>
                        </vr-columns>
                        <vr-columns width="normal">
                            <vr-lable isvalue>${{scopeModel.Exposure | number}}</vr-lable>
                        </vr-columns>
                    </vr-row>
                </vr-section>
            </div>

        </vr-form>
    </vr-modalbody>
    <div>
        <vr-actionbar showcollapsebutton="false" issectioncollapsed="false">
            <div transclude-to="buttons">
                <vr-button type="Save" formname="formEditor" data-onclick="scopeModel.save"></vr-button>
                <vr-button type="Close" data-onclick="scopeModel.close"></vr-button>
            </div>
        </vr-actionbar>
    </div>
</div>