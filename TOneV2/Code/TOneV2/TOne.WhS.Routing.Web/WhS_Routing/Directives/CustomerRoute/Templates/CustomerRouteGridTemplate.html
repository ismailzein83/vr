<div vr-loader="isLoading">
    <vr-datagrid on-ready="onGridReady"
                 datasource="customerRoutes"
                 dataretrievalfunction="dataRetrievalFunction"
                 menuactions="gridMenuActions"
                 pagingtype="'Pager'"
                 defaultsortbyfieldname="'CustomerName'"
                 idfield="CustomerRouteDetailId"
                 enableautoexport="true" normalcell>

        <vr-datagridcolumn headertext="'Customer'" field="'CustomerName'" fixedwidth="120" getcolor="getColor"></vr-datagridcolumn>
        <vr-datagridcolumn headertext="'Code'" field="'Code'" fixedwidth="100"></vr-datagridcolumn>
        <vr-datagridcolumn headertext="'Zone'" field="'SaleZoneName'" fixedwidth="120"></vr-datagridcolumn>
        <vr-datagridcolumn headertext="'Rate'" field="'Rate'" type="'Number'" numberprecision="'LongPrecision'" fixedwidth="60"></vr-datagridcolumn>
        <vr-datagridcolumn headertext="'Services'" fixedwidth="60">
            <vr-whs-be-services-viewer on-ready="dataItem.onServiceViewerReady"></vr-whs-be-services-viewer>
        </vr-datagridcolumn>
        <vr-datagridcolumn headertext="'Blocked'" fixedwidth="50">
            <span ng-show="dataItem.IsBlocked">
                <vr-icon icontype="'2'" tooltip="'Blocked'" centered></vr-icon>
            </span>
        </vr-datagridcolumn>
        <vr-datagridcolumn headertext="'Linked Rules'" field="'LinkedRouteRuleCount'" fixedwidth="75" isfielddynamic="true" disablesorting></vr-datagridcolumn>
        <vr-datagridcolumn headertext="'Rule Type'" field="'ExecutedRouteRuleSettingsTypeName'" fixedwidth="90"></vr-datagridcolumn>
        <vr-datagridcolumn headertext="'Rule Name'" field="'ExecutedRouteRuleName'" fixedwidth="100"></vr-datagridcolumn>
        <vr-datagridcolumn headertext="'Route Options'" disablesorting>
            <div class="responsive-container" style="white-space: normal;">
                <span ng-repeat="details in dataItem.RouteOptionDetails" style="font-size: 11px; cursor: pointer; display: inline-block; text-align: center; padding: 0 10px 0 0;">
                    <span class="option bold-label" ng-class="details.EvaluatedStatusCssClass" title="Rate: {{details.SupplierRate}}, Services: {{details.ExactSupplierServiceSymbols}}">
                        <span ng-if="details.Percentage!=null">{{details.Percentage}}% </span> {{details.SupplierName}}
                    </span>
                    <span ng-if="details.Backups != null && details.Backups.length > 0">
                        &lt;
                        <span ng-repeat="backupDetails in details.Backups">
                            <span style="font-style:italic" class="option" ng-class="backupDetails.EvaluatedStatusCssClass"
                                  title="Rate: {{backupDetails.SupplierRate}}, Services: {{backupDetails.ExactSupplierServiceSymbols}}">
                                {{backupDetails.SupplierName}}
                            </span>
                            <span ng-if="!$last">,</span>
                        </span>
                        &gt;
                    </span>
                </span>
            </div>
        </vr-datagridcolumn>

        <vr-datagridexpandablerow>
            <vr-directivetabs tabitems="dataItem.drillDownExtensionObject.drillDownDirectiveTabs"></vr-directivetabs>
        </vr-datagridexpandablerow>
    </vr-datagrid>
</div>